{"file_contents":{"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/pages/Team.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport StylistCard from \"@/components/StylistCard\";\nimport type { Staff } from \"@shared/schema\";\n\nexport default function Team() {\n  const { data: allStaff = [], isLoading } = useQuery<Staff[]>({\n    queryKey: [\"/api/staff/active\"],\n  });\n\n  // Filter only designers\n  const designers = allStaff.filter(s => s.role === \"設計師\");\n\n  // Transform staff data to match StylistCard interface\n  const stylists = designers.map(designer => ({\n    name: designer.name,\n    specialty: designer.specialty || \"專業設計師\",\n    experience: designer.yearsOfExperience ? `${designer.yearsOfExperience}年專業經驗` : \"豐富經驗\",\n    image: designer.photoUrl || \"\",\n    bio: `擁有${designer.yearsOfExperience || \"豐富\"}年經驗的${designer.specialty || \"專業設計師\"}，精通各式剪髮、染燙技術。以專業的技術與溫暖的服務，為每位顧客打造最適合的髮型。`,\n  }));\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen py-12\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center\">\n            <h1 className=\"text-5xl font-serif font-bold mb-4\">專業團隊</h1>\n            <p className=\"text-lg text-muted-foreground\">載入中...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-5xl font-serif font-bold mb-4\">專業團隊</h1>\n          <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n            我們的設計師團隊擁有豐富經驗與專業技術，以真誠的態度為您服務\n          </p>\n        </div>\n\n        {stylists.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">目前沒有設計師資料</p>\n          </div>\n        ) : (\n          <div className=\"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n            {stylists.map((stylist, index) => (\n              <StylistCard key={index} {...stylist} />\n            ))}\n          </div>\n        )}\n\n        <div className=\"mt-16 p-8 bg-card rounded-2xl max-w-4xl mx-auto\">\n          <h2 className=\"text-2xl font-serif font-semibold mb-4 text-center\">為什麼選擇雅曼</h2>\n          <div className=\"grid md:grid-cols-2 gap-6 text-muted-foreground\">\n            <div>\n              <h3 className=\"font-semibold text-foreground mb-2\">專業認證</h3>\n              <p className=\"text-sm\">所有設計師均經過專業培訓與認證，持續進修最新技術</p>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-foreground mb-2\">客製服務</h3>\n              <p className=\"text-sm\">根據每位顧客的需求，提供最適合的專業建議</p>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-foreground mb-2\">溫馨環境</h3>\n              <p className=\"text-sm\">如家般舒適的空間，讓您在放鬆中享受美髮時光</p>\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-foreground mb-2\">品質保證</h3>\n              <p className=\"text-sm\">使用頂級美髮產品，確保最佳服務品質</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3388},"client/src/pages/AdminDashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, Users, Scissors, TrendingUp, Search, LogOut, CalendarDays, Lock } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport type { Booking } from \"@shared/schema\";\n\nexport default function AdminDashboard() {\n  const [, setLocation] = useLocation();\n\n  const { data: bookings = [] } = useQuery<Booking[]>({\n    queryKey: [\"/api/bookings\"],\n  });\n\n  const today = new Date().toISOString().split(\"T\")[0];\n  const tomorrow = new Date(Date.now() + 86400000).toISOString().split(\"T\")[0];\n\n  const todayBookings = bookings.filter(b => b.bookingDate === today);\n  const tomorrowBookings = bookings.filter(b => b.bookingDate === tomorrow);\n  const pendingBookings = bookings.filter(b => b.status === \"pending\");\n\n  const handleLogout = () => {\n    console.log(\"Logging out\");\n    setLocation(\"/admin\");\n  };\n\n  const menuItems = [\n    {\n      title: \"預約月曆\",\n      description: \"查看月曆視圖和管理預約\",\n      icon: CalendarDays,\n      path: \"/admin/calendar\",\n      color: \"text-blue-600\",\n      testId: \"nav-calendar\"\n    },\n    {\n      title: \"客戶管理\",\n      description: \"管理客戶資料和消費紀錄\",\n      icon: Users,\n      path: \"/admin/customers\",\n      color: \"text-green-600\",\n      testId: \"nav-customers\"\n    },\n    {\n      title: \"服務項目\",\n      description: \"新增、編輯和管理服務項目\",\n      icon: Scissors,\n      path: \"/admin/services\",\n      color: \"text-purple-600\",\n      testId: \"nav-services\"\n    },\n    {\n      title: \"員工管理\",\n      description: \"管理設計師和助理\",\n      icon: Users,\n      path: \"/admin/staff\",\n      color: \"text-indigo-600\",\n      testId: \"nav-staff\"\n    },\n    {\n      title: \"行銷活動\",\n      description: \"建立和管理促銷活動\",\n      icon: TrendingUp,\n      path: \"/admin/marketing\",\n      color: \"text-orange-600\",\n      testId: \"nav-marketing\"\n    },\n    {\n      title: \"SEO 設定\",\n      description: \"管理網站 SEO 元數據\",\n      icon: Search,\n      path: \"/admin/seo\",\n      color: \"text-pink-600\",\n      testId: \"nav-seo\"\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-muted/30 py-8\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <h1 className=\"text-4xl font-serif font-bold mb-2\">管理後台</h1>\n            <p className=\"text-muted-foreground\">雅曼美髮沙龍後台管理系統</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" onClick={() => setLocation(\"/admin/change-password\")} data-testid=\"button-change-password\">\n              <Lock className=\"w-4 h-4 mr-2\" />\n              修改密碼\n            </Button>\n            <Button variant=\"outline\" onClick={handleLogout} data-testid=\"button-logout\">\n              <LogOut className=\"w-4 h-4 mr-2\" />\n              登出\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6 mb-8\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 gap-2\">\n              <CardTitle className=\"text-sm font-medium\">今日預約</CardTitle>\n              <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold\">{todayBookings.length}</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                待確認：{todayBookings.filter(b => b.status === \"pending\").length}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 gap-2\">\n              <CardTitle className=\"text-sm font-medium\">明日預約</CardTitle>\n              <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold\">{tomorrowBookings.length}</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                待確認：{tomorrowBookings.filter(b => b.status === \"pending\").length}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 gap-2\">\n              <CardTitle className=\"text-sm font-medium\">待確認預約</CardTitle>\n              <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold\">{pendingBookings.length}</div>\n              <p className=\"text-xs text-muted-foreground mt-1\">總預約數：{bookings.length}</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {menuItems.map((item) => (\n            <Card\n              key={item.path}\n              className=\"hover-elevate active-elevate-2 cursor-pointer\"\n              onClick={() => setLocation(item.path)}\n              data-testid={item.testId}\n            >\n              <CardHeader>\n                <div className=\"flex items-center gap-3\">\n                  <div className={`p-2 rounded-lg bg-muted ${item.color}`}>\n                    <item.icon className=\"h-6 w-6\" />\n                  </div>\n                  <CardTitle className=\"text-lg\">{item.title}</CardTitle>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <CardDescription>{item.description}</CardDescription>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5959},"client/src/components/examples/AdminLogin.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport AdminLogin from '../../pages/AdminLogin';\n\nexport default function AdminLoginExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AdminLogin />\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n","size_bytes":500},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"replit.md":{"content":"# Yaman Hair Salon Website\n\n## Overview\n\nA full-stack web application for 雅曼美髮沙龍 (Yaman Hair Salon), a family-run hair salon in New Taipei City, Taiwan. The application provides a warm, welcoming online presence with booking management, customer relationship management, and administrative tools. Built with a modern React frontend and Express backend, the system enables customers to browse services, meet the team, and make appointments while giving salon staff comprehensive tools to manage bookings, customers, services, and marketing campaigns.\n\n## Recent Changes (November 6, 2025)\n\n### Staff Photo Upload Feature\n- **Backend**: Added file upload endpoint (POST /api/upload) using Multer middleware\n  - Validates file type (images only: JPEG, PNG, GIF, WebP)\n  - Enforces 5MB file size limit\n  - Saves uploaded photos to `/attached_assets/` with timestamp-based filenames\n  - Returns photo URL for database storage\n\n- **Admin Staff Management**: Enhanced photo management capabilities\n  - Photo upload button with file picker\n  - Real-time photo preview using 128px Avatar component\n  - Upload progress indicator\n  - Remove photo functionality\n  - Photos persist in database via `photoUrl` field\n  - Avatar displays in staff list (both designers and assistants)\n  - Photo preview in edit dialog shows existing photo\n\n- **Public Team Page**: Now reads from database instead of hardcoded data\n  - Fetches active staff from GET /api/staff/active\n  - Filters to show only designers (role === \"設計師\")\n  - Displays loading state during data fetch\n  - Shows \"目前沒有設計師資料\" when no designers exist\n  - Automatically updates when new staff added in admin\n\n- **Bug Fixes**: Fixed photo preview state not resetting after save/cancel\n\n### Database Integration\n- Staff photos stored permanently in PostgreSQL\n- All admin changes immediately reflected on public pages via React Query cache invalidation\n- Staff data including photos survives application restarts\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React 18 with TypeScript running in a Vite development environment\n\n**Routing**: Wouter for client-side routing with paths for:\n- Public pages: Home, Services, Team, Booking, Contact\n- Admin pages: Login, Dashboard, Calendar, Customers, Services, Staff, Marketing, SEO\n\n**UI Component Library**: Shadcn/ui with Radix UI primitives providing:\n- Consistent design system based on \"new-york\" style\n- Tailwind CSS for styling with custom color tokens\n- Typography system using Noto Serif TC (headings), Noto Sans TC (body), and Inter (UI elements)\n- Neutral base color scheme with warm, hospitality-focused aesthetics\n\n**State Management**: \n- TanStack Query (React Query) for server state with custom query client configuration\n- Query functions configured to throw on 401 errors by default\n- Infinite stale time and disabled refetching for better control\n\n**Form Handling**: React Hook Form with Zod validation via @hookform/resolvers\n\n**Design Philosophy**: Airbnb-inspired warm hospitality combined with beauty industry polish, creating a family-like atmosphere while maintaining professional credibility\n\n### Backend Architecture\n\n**Framework**: Express.js server with TypeScript\n\n**API Design**: RESTful API endpoints organized by resource:\n- `/api/customers` - Customer CRUD operations\n- `/api/services` - Service management\n- `/api/staff` - Staff/stylist management  \n- `/api/bookings` - Appointment booking system\n- `/api/purchase-records` - Customer purchase history\n- `/api/marketing-campaigns` - Marketing campaign management\n- `/api/seo-settings` - SEO configuration per page\n\n**Development Server**: Vite middleware integration for hot module replacement during development\n\n**Request Logging**: Custom middleware capturing request method, path, status, duration, and truncated JSON responses for API calls\n\n**Static File Serving**: Production builds serve from `dist/public` directory\n\n### Data Layer\n\n**ORM**: Drizzle ORM configured for PostgreSQL with:\n- Schema definitions in `shared/schema.ts` for type safety across frontend/backend\n- Migration files output to `./migrations` directory\n- Zod schema generation via drizzle-zod for runtime validation\n- Neon HTTP client for database connections\n\n**Database Implementation**: \n- **Current**: `DbStorage` class using Neon PostgreSQL for all data persistence\n- Automatic initialization of default data on first startup:\n  - Admin user (yama3058/yama3058)\n  - 5 default services (洗髮, 專業剪髮, 時尚染髮, 質感燙髮, 深層護髮)\n  - 2 staff members with professional photos:\n    - 益安 (35 years experience, 總監)\n    - 巧宣 (27 years experience)\n- All data persists across application restarts\n- Staff photos stored in `/attached_assets/` and referenced in database\n\n**Database Schema**:\n- `users` - Admin authentication (username, password)\n- `customers` - Customer profiles with contact info (phone, LINE ID, email)\n- `services` - Service catalog with pricing, duration, and active status\n- `staff` - Team member profiles with roles, specialties, experience, and photo URLs\n- `bookings` - Appointments linking customers, services, and staff with status tracking (pending/approved/rejected/cancelled)\n- `purchase_records` - Transaction history for customer relationship management\n- `marketing_campaigns` - Promotional campaigns with discount configuration\n- `seo_settings` - Page-specific SEO metadata (title, description, keywords, OG images)\n\n**Storage Abstraction**: `IStorage` interface defining all data operations\n- `DbStorage`: PostgreSQL implementation using Drizzle ORM\n- `MemStorage`: Legacy in-memory implementation (no longer used)\n\n### Build and Deployment\n\n**Build Process**: \n- Frontend: Vite builds React app to `dist/public`\n- Backend: esbuild bundles Express server to `dist/index.js` as ESM with external packages\n\n**Development**: NODE_ENV=development with tsx for TypeScript execution\n\n**Production**: NODE_ENV=production running bundled JavaScript\n\n**Path Aliases**: \n- `@/*` → `client/src/*`\n- `@shared/*` → `shared/*`\n- `@assets/*` → `attached_assets/*`\n\n## External Dependencies\n\n### Database\n- **Neon Database** (@neondatabase/serverless) - Serverless PostgreSQL hosting\n- **PostgreSQL** - Primary database via Drizzle dialect configuration\n\n### UI Components\n- **Radix UI** - Headless component primitives (20+ components including dialogs, dropdowns, calendars)\n- **Shadcn/ui** - Pre-styled component configurations built on Radix\n- **Lucide React** - Icon library\n- **React Icons** - Additional icons (specifically SiLine for LINE messenger integration)\n\n### Form and Validation\n- **Zod** - Schema validation library\n- **React Hook Form** - Form state management\n- **Drizzle-Zod** - Automatic Zod schema generation from Drizzle schemas\n\n### Date Handling\n- **date-fns** - Date manipulation and formatting with zh-TW locale support\n\n### Styling\n- **Tailwind CSS** - Utility-first CSS framework\n- **class-variance-authority** - Type-safe variant styling\n- **tailwind-merge** - Intelligent class merging\n\n### Developer Experience\n- **Vite** - Build tool and dev server\n- **TypeScript** - Type safety\n- **esbuild** - Production bundling\n- **tsx** - TypeScript execution for development\n\n### Third-Party Services\n- **LINE Messenger** - Customer communication channel (@377bechg)\n- **Google Maps** - Location services for salon address (新北市中和區民德路52號1樓)\n- **Google Fonts** - Typography (Inter, Noto Sans TC, Noto Serif TC)","size_bytes":7590},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/pages/Contact.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { MapPin, Phone, Clock, Mail } from \"lucide-react\";\nimport { SiLine } from \"react-icons/si\";\n\nexport default function Contact() {\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-5xl font-serif font-bold mb-4\">聯絡我們</h1>\n          <p className=\"text-lg text-muted-foreground\">歡迎隨時與我們聯繫</p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto\">\n          <Card>\n            <CardContent className=\"p-8\">\n              <h2 className=\"text-2xl font-serif font-semibold mb-6\">聯絡資訊</h2>\n              <div className=\"space-y-6\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <MapPin className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold mb-1\">地址</h3>\n                    <p className=\"text-muted-foreground\">新北市中和區民德路52號1樓</p>\n                    <a\n                      href=\"https://maps.google.com/?q=新北市中和區民德路52號1樓\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-primary text-sm hover:underline\"\n                    >\n                      在Google地圖中查看\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <Phone className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold mb-1\">電話</h3>\n                    <a href=\"tel:02-89513058\" className=\"text-muted-foreground hover:text-primary transition-colors\">\n                      02-89513058\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <SiLine className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold mb-1\">LINE官方帳號</h3>\n                    <p className=\"text-muted-foreground mb-2\">@377bechg</p>\n                    <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      <Button size=\"sm\" data-testid=\"button-line-contact\">\n                        <SiLine className=\"w-4 h-4 mr-2\" />\n                        加入LINE好友\n                      </Button>\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <Clock className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold mb-1\">營業時間</h3>\n                    <div className=\"text-muted-foreground space-y-1\">\n                      <p>週一至週六：10:00 - 20:00</p>\n                      <p>週日：10:00 - 18:00</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-8\">\n              <h2 className=\"text-2xl font-serif font-semibold mb-6\">交通方式</h2>\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"font-semibold mb-2\">大眾運輸</h3>\n                  <ul className=\"text-muted-foreground space-y-2 text-sm\">\n                    <li>• 捷運：中和新蘆線「景安站」步行約10分鐘</li>\n                    <li>• 公車：242、243、248、307、705 於「民德路口」站下車</li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"font-semibold mb-2\">停車資訊</h3>\n                  <ul className=\"text-muted-foreground space-y-2 text-sm\">\n                    <li>• 路邊停車格（民德路沿線）</li>\n                    <li>• 中和民德公有停車場（步行3分鐘）</li>\n                  </ul>\n                </div>\n\n                <a\n                  href=\"https://www.google.com/maps/search/?api=1&query=新北市中和區民德路52號1樓\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"block bg-muted/50 p-4 rounded-xl hover-elevate transition-all\"\n                  data-testid=\"link-google-map\"\n                >\n                  <div className=\"aspect-video bg-gradient-to-br from-primary/10 to-primary/5 rounded-lg flex flex-col items-center justify-center gap-3 border-2 border-dashed border-primary/30\">\n                    <MapPin className=\"w-12 h-12 text-primary\" />\n                    <div className=\"text-center\">\n                      <p className=\"font-semibold text-primary\">點擊開啟Google地圖</p>\n                      <p className=\"text-xs text-muted-foreground mt-1\">新北市中和區民德路52號1樓</p>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-center text-primary font-medium mt-3\">📍 在地圖上查看位置與路線</p>\n                </a>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"mt-12 text-center\">\n          <Card className=\"max-w-2xl mx-auto\">\n            <CardContent className=\"p-8\">\n              <h2 className=\"text-2xl font-serif font-semibold mb-4\">建議提前預約</h2>\n              <p className=\"text-muted-foreground mb-6\">\n                為確保您能在最適合的時間享受服務，我們建議您提前預約。\n                您可以透過電話、LINE或線上預約系統完成預約。\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <a href=\"tel:02-89513058\">\n                  <Button variant=\"outline\" data-testid=\"button-call\">\n                    <Phone className=\"w-4 h-4 mr-2\" />\n                    電話預約\n                  </Button>\n                </a>\n                <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Button variant=\"outline\" data-testid=\"button-line\">\n                    <SiLine className=\"w-4 h-4 mr-2\" />\n                    LINE預約\n                  </Button>\n                </a>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7155},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 30 4% 97%;\n\n  --foreground: 30 8% 12%;\n\n  --border: 30 6% 88%;\n\n  --card: 32 6% 95%;\n\n  --card-foreground: 30 8% 12%;\n\n  --card-border: 30 8% 90%;\n\n  --sidebar: 28 5% 93%;\n\n  --sidebar-foreground: 30 8% 12%;\n\n  --sidebar-border: 28 8% 86%;\n\n  --sidebar-primary: 25 65% 42%;\n\n  --sidebar-primary-foreground: 25 20% 98%;\n\n  --sidebar-accent: 28 12% 88%;\n\n  --sidebar-accent-foreground: 30 8% 15%;\n\n  --sidebar-ring: 25 65% 42%;\n\n  --popover: 30 8% 91%;\n\n  --popover-foreground: 30 8% 12%;\n\n  --popover-border: 30 10% 84%;\n\n  --primary: 25 65% 42%;\n\n  --primary-foreground: 25 20% 98%;\n\n  --secondary: 28 10% 86%;\n\n  --secondary-foreground: 30 8% 12%;\n\n  --muted: 28 10% 88%;\n\n  --muted-foreground: 30 6% 35%;\n\n  --accent: 28 15% 85%;\n\n  --accent-foreground: 30 8% 12%;\n\n  --destructive: 0 70% 45%;\n\n  --destructive-foreground: 0 20% 98%;\n\n  --input: 30 12% 75%;\n  --ring: 25 65% 42%;\n  --chart-1: 25 70% 38%;\n  --chart-2: 15 60% 48%;\n  --chart-3: 35 55% 45%;\n  --chart-4: 200 50% 42%;\n  --chart-5: 280 45% 48%;\n\n  --font-sans: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;\n  --font-serif: 'Noto Serif TC', Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(30 15% 15% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(30 15% 15% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(30 15% 15% / 0.00), 0px 1px 2px -1px hsl(30 15% 15% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(30 15% 15% / 0.00), 0px 1px 2px -1px hsl(30 15% 15% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(30 15% 15% / 0.00), 0px 2px 4px -1px hsl(30 15% 15% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(30 15% 15% / 0.00), 0px 4px 6px -1px hsl(30 15% 15% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(30 15% 15% / 0.00), 0px 8px 10px -1px hsl(30 15% 15% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(30 15% 15% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 30 5% 8%;\n\n  --foreground: 30 8% 95%;\n\n  --border: 30 6% 18%;\n\n  --card: 30 5% 11%;\n\n  --card-foreground: 30 8% 95%;\n\n  --card-border: 30 6% 16%;\n\n  --sidebar: 28 5% 13%;\n\n  --sidebar-foreground: 30 8% 95%;\n\n  --sidebar-border: 28 6% 19%;\n\n  --sidebar-primary: 25 70% 35%;\n\n  --sidebar-primary-foreground: 25 20% 98%;\n\n  --sidebar-accent: 28 12% 18%;\n\n  --sidebar-accent-foreground: 30 8% 92%;\n\n  --sidebar-ring: 25 70% 35%;\n\n  --popover: 30 6% 15%;\n\n  --popover-foreground: 30 8% 95%;\n\n  --popover-border: 30 7% 21%;\n\n  --primary: 25 70% 35%;\n\n  --primary-foreground: 25 20% 98%;\n\n  --secondary: 28 8% 20%;\n\n  --secondary-foreground: 30 8% 95%;\n\n  --muted: 28 8% 17%;\n\n  --muted-foreground: 30 6% 70%;\n\n  --accent: 28 10% 19%;\n\n  --accent-foreground: 30 8% 95%;\n\n  --destructive: 0 75% 35%;\n\n  --destructive-foreground: 0 20% 98%;\n\n  --input: 30 10% 28%;\n  --ring: 25 70% 35%;\n  --chart-1: 25 75% 72%;\n  --chart-2: 15 70% 68%;\n  --chart-3: 35 65% 70%;\n  --chart-4: 200 60% 68%;\n  --chart-5: 280 55% 72%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(30 15% 5% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(30 15% 5% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(30 15% 5% / 0.00), 0px 1px 2px -1px hsl(30 15% 5% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(30 15% 5% / 0.00), 0px 1px 2px -1px hsl(30 15% 5% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(30 15% 5% / 0.00), 0px 2px 4px -1px hsl(30 15% 5% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(30 15% 5% / 0.00), 0px 4px 6px -1px hsl(30 15% 5% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(30 15% 5% / 0.00), 0px 8px 10px -1px hsl(30 15% 5% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(30 15% 5% / 0.00);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11193},"client/src/pages/AdminMarketing.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertMarketingCampaignSchema, type MarketingCampaign, type InsertMarketingCampaign } from \"@shared/schema\";\nimport { Plus, Edit, Trash2, TrendingUp } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport default function AdminMarketing() {\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingCampaign, setEditingCampaign] = useState<MarketingCampaign | null>(null);\n\n  const { data: campaigns = [], isLoading } = useQuery<MarketingCampaign[]>({\n    queryKey: [\"/api/marketing-campaigns\"],\n  });\n\n  const form = useForm<InsertMarketingCampaign>({\n    resolver: zodResolver(insertMarketingCampaignSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      discountType: null,\n      discountValue: null,\n      startDate: null,\n      endDate: null,\n      isActive: true,\n    },\n  });\n\n  const createCampaignMutation = useMutation({\n    mutationFn: async (data: InsertMarketingCampaign) => {\n      const response = await fetch(\"/api/marketing-campaigns\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to create campaign\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/marketing-campaigns\"] });\n      toast({ title: \"行銷活動已新增\" });\n      handleCloseDialog();\n    },\n  });\n\n  const updateCampaignMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertMarketingCampaign> }) => {\n      const response = await fetch(`/api/marketing-campaigns/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to update campaign\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/marketing-campaigns\"] });\n      toast({ title: \"行銷活動已更新\" });\n      handleCloseDialog();\n    },\n  });\n\n  const deleteCampaignMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await fetch(`/api/marketing-campaigns/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete campaign\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/marketing-campaigns\"] });\n      toast({ title: \"行銷活動已刪除\" });\n    },\n  });\n\n  const handleCreateNew = () => {\n    setEditingCampaign(null);\n    form.reset({\n      title: \"\",\n      description: \"\",\n      discountType: null,\n      discountValue: null,\n      startDate: null,\n      endDate: null,\n      isActive: true,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (campaign: MarketingCampaign) => {\n    setEditingCampaign(campaign);\n    form.reset({\n      title: campaign.title,\n      description: campaign.description,\n      discountType: campaign.discountType,\n      discountValue: campaign.discountValue,\n      startDate: campaign.startDate,\n      endDate: campaign.endDate,\n      isActive: campaign.isActive,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm(\"確定要刪除此行銷活動嗎？\")) {\n      deleteCampaignMutation.mutate(id);\n    }\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setEditingCampaign(null);\n    form.reset();\n  };\n\n  const handleSubmit = (data: InsertMarketingCampaign) => {\n    if (editingCampaign) {\n      updateCampaignMutation.mutate({ id: editingCampaign.id, data });\n    } else {\n      createCampaignMutation.mutate(data);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-serif\">行銷活動管理</h1>\n          <Button onClick={handleCreateNew} data-testid=\"button-add-campaign\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            新增活動\n          </Button>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <TrendingUp className=\"h-5 w-5\" />\n              行銷活動列表 ({campaigns.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n            ) : campaigns.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">尚無行銷活動</div>\n            ) : (\n              <div className=\"divide-y\">\n                {campaigns.map((campaign) => (\n                  <div\n                    key={campaign.id}\n                    className=\"py-4\"\n                    data-testid={`campaign-${campaign.id}`}\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <span className=\"font-medium text-lg\" data-testid={`text-campaign-title-${campaign.id}`}>\n                            {campaign.title}\n                          </span>\n                          {campaign.isActive ? (\n                            <Badge variant=\"default\">進行中</Badge>\n                          ) : (\n                            <Badge variant=\"secondary\">已結束</Badge>\n                          )}\n                        </div>\n                        <div className=\"text-sm text-muted-foreground\" data-testid={`text-campaign-description-${campaign.id}`}>\n                          {campaign.description}\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(campaign)}\n                          data-testid={`button-edit-${campaign.id}`}\n                        >\n                          <Edit className=\"h-4 w-4 mr-1\" />\n                          編輯\n                        </Button>\n                        <Button\n                          variant=\"destructive\"\n                          size=\"sm\"\n                          onClick={() => handleDelete(campaign.id)}\n                          data-testid={`button-delete-${campaign.id}`}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 text-sm mt-2\">\n                      {campaign.discountType && (\n                        <div>\n                          <span className=\"text-muted-foreground\">優惠類型: </span>\n                          <span className=\"font-medium\">{campaign.discountType}</span>\n                        </div>\n                      )}\n                      {campaign.discountValue && (\n                        <div>\n                          <span className=\"text-muted-foreground\">優惠內容: </span>\n                          <span className=\"font-medium\">{campaign.discountValue}</span>\n                        </div>\n                      )}\n                      {campaign.startDate && (\n                        <div>\n                          <span className=\"text-muted-foreground\">開始日期: </span>\n                          <span className=\"font-medium\">{campaign.startDate}</span>\n                        </div>\n                      )}\n                      {campaign.endDate && (\n                        <div>\n                          <span className=\"text-muted-foreground\">結束日期: </span>\n                          <span className=\"font-medium\">{campaign.endDate}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Dialog open={isDialogOpen} onOpenChange={handleCloseDialog}>\n          <DialogContent data-testid=\"dialog-campaign-form\">\n            <DialogHeader>\n              <DialogTitle>{editingCampaign ? \"編輯行銷活動\" : \"新增行銷活動\"}</DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"title\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>活動標題 *</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-campaign-title\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"description\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>活動說明 *</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} data-testid=\"input-campaign-description\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"discountType\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>優惠類型</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} placeholder=\"例如: 折扣、優惠\" data-testid=\"input-campaign-discount-type\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"discountValue\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>優惠內容</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} placeholder=\"例如: 8折、送護髮\" data-testid=\"input-campaign-discount-value\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"startDate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>開始日期</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} type=\"date\" data-testid=\"input-campaign-start-date\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"endDate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>結束日期</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} type=\"date\" data-testid=\"input-campaign-end-date\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"isActive\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex items-center justify-between rounded-lg border p-4\">\n                      <div>\n                        <FormLabel>活動狀態</FormLabel>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {field.value ? \"此活動將在前台顯示\" : \"此活動將被隱藏\"}\n                        </div>\n                      </div>\n                      <FormControl>\n                        <Switch\n                          checked={field.value}\n                          onCheckedChange={field.onChange}\n                          data-testid=\"switch-campaign-active\"\n                        />\n                      </FormControl>\n                    </FormItem>\n                  )}\n                />\n\n                <DialogFooter>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={handleCloseDialog}\n                    data-testid=\"button-cancel\"\n                  >\n                    取消\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createCampaignMutation.isPending || updateCampaignMutation.isPending}\n                    data-testid=\"button-submit\"\n                  >\n                    {createCampaignMutation.isPending || updateCampaignMutation.isPending\n                      ? \"儲存中...\"\n                      : editingCampaign\n                      ? \"更新活動\"\n                      : \"新增活動\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","size_bytes":14873},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/pages/AdminCalendar.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon } from \"lucide-react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Booking, Staff } from \"@shared/schema\";\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameDay, addMonths, subMonths, getDay } from \"date-fns\";\nimport { zhTW } from \"date-fns/locale\";\n\nexport default function AdminCalendar() {\n  const { toast } = useToast();\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [selectedBooking, setSelectedBooking] = useState<Booking | null>(null);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [editStatus, setEditStatus] = useState<string>(\"\");\n  const [editStylistId, setEditStylistId] = useState<string>(\"\");\n  const [editAssistantId, setEditAssistantId] = useState<string>(\"\");\n\n  const { data: bookings = [], isLoading } = useQuery<Booking[]>({\n    queryKey: [\"/api/bookings\"],\n  });\n\n  const { data: designers = [] } = useQuery<Staff[]>({\n    queryKey: [\"/api/staff/role/設計師\"],\n  });\n\n  const { data: assistants = [] } = useQuery<Staff[]>({\n    queryKey: [\"/api/staff/role/助理\"],\n  });\n\n  const updateBookingMutation = useMutation({\n    mutationFn: async ({ id, updates }: { id: string; updates: any }) => {\n      const response = await fetch(`/api/bookings/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(updates),\n      });\n      if (!response.ok) throw new Error(\"Failed to update booking\");\n      return response.json();\n    },\n    onSuccess: async (data) => {\n      await queryClient.refetchQueries({ queryKey: [\"/api/bookings\"] });\n      toast({ title: \"預約已更新\" });\n      setIsEditDialogOpen(false);\n      setSelectedBooking(null);\n    },\n  });\n\n  const monthStart = startOfMonth(currentMonth);\n  const monthEnd = endOfMonth(currentMonth);\n  const daysInMonth = eachDayOfInterval({ start: monthStart, end: monthEnd });\n\n  const startDayOfWeek = getDay(monthStart);\n  const paddingDays = Array.from({ length: startDayOfWeek }, (_, i) => i);\n\n  const getBookingsForDate = (date: Date) => {\n    const dateStr = format(date, \"yyyy-MM-dd\");\n    return bookings.filter((booking) => booking.bookingDate === dateStr);\n  };\n\n  const handlePreviousMonth = () => {\n    setCurrentMonth(subMonths(currentMonth, 1));\n  };\n\n  const handleNextMonth = () => {\n    setCurrentMonth(addMonths(currentMonth, 1));\n  };\n\n  const handleBookingClick = (booking: Booking) => {\n    setSelectedBooking(booking);\n    setEditStatus(booking.status);\n    setEditStylistId(booking.stylistId || \"\");\n    setEditAssistantId(booking.assistantId || \"__none__\");\n    setIsEditDialogOpen(true);\n  };\n\n  const handleUpdateBooking = () => {\n    if (selectedBooking) {\n      const selectedStylist = designers.find(d => d.id === editStylistId);\n      const selectedAssistant = assistants.find(a => a.id === editAssistantId);\n      \n      const updates: any = { status: editStatus };\n      \n      if (editStylistId) {\n        updates.stylistId = editStylistId;\n        updates.stylistName = selectedStylist?.name || \"\";\n      }\n      \n      if (editAssistantId && editAssistantId !== \"__none__\") {\n        updates.assistantId = editAssistantId;\n        updates.assistantName = selectedAssistant?.name || \"\";\n      } else {\n        updates.assistantId = null;\n        updates.assistantName = null;\n      }\n      \n      updateBookingMutation.mutate({ id: selectedBooking.id, updates });\n    }\n  };\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case \"confirmed\":\n        return \"default\";\n      case \"completed\":\n        return \"secondary\";\n      case \"cancelled\":\n        return \"destructive\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"待確認\";\n      case \"confirmed\":\n        return \"已確認\";\n      case \"completed\":\n        return \"已完成\";\n      case \"cancelled\":\n        return \"已取消\";\n      default:\n        return status;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-serif\">預約月曆</h1>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={handlePreviousMonth}\n              data-testid=\"button-previous-month\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"text-lg font-medium min-w-[120px] text-center\" data-testid=\"text-current-month\">\n              {format(currentMonth, \"yyyy年 M月\", { locale: zhTW })}\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={handleNextMonth}\n              data-testid=\"button-next-month\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CalendarIcon className=\"h-5 w-5\" />\n              預約行事曆\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n            ) : (\n              <div className=\"grid grid-cols-7 gap-2\">\n                {[\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"].map((day) => (\n                  <div\n                    key={day}\n                    className=\"text-center font-medium text-sm py-2 text-muted-foreground\"\n                  >\n                    {day}\n                  </div>\n                ))}\n                \n                {paddingDays.map((_, index) => (\n                  <div key={`padding-${index}`} className=\"min-h-[100px]\" />\n                ))}\n                \n                {daysInMonth.map((date) => {\n                  const dayBookings = getBookingsForDate(date);\n                  const isToday = isSameDay(date, new Date());\n\n                  return (\n                    <div\n                      key={date.toISOString()}\n                      className={`min-h-[100px] border rounded-md p-2 ${\n                        isToday ? \"bg-accent/20 border-primary\" : \"bg-card\"\n                      }`}\n                      data-testid={`calendar-day-${format(date, \"yyyy-MM-dd\")}`}\n                    >\n                      <div className=\"text-sm font-medium mb-1\">{format(date, \"d\")}</div>\n                      <div className=\"space-y-1\">\n                        {dayBookings.map((booking) => (\n                          <button\n                            key={booking.id}\n                            onClick={() => handleBookingClick(booking)}\n                            className=\"w-full text-left text-xs p-1 rounded hover-elevate active-elevate-2 bg-primary/10 border border-primary/20\"\n                            data-testid={`booking-${booking.id}`}\n                          >\n                            <div className=\"font-medium truncate\">{booking.bookingTime}</div>\n                            <div className=\"truncate text-muted-foreground\">{booking.customerName}</div>\n                            <div className=\"truncate text-muted-foreground\">{booking.serviceNames}</div>\n                            {booking.status === \"pending\" && (\n                              <Badge variant=\"outline\" className=\"text-xs mt-0.5\">待審核</Badge>\n                            )}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n          <DialogContent data-testid=\"dialog-booking-details\">\n            <DialogHeader>\n              <DialogTitle>預約詳情</DialogTitle>\n            </DialogHeader>\n            {selectedBooking && (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">客戶姓名</div>\n                    <div className=\"font-medium\" data-testid=\"text-customer-name\">\n                      {selectedBooking.customerName}\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">聯絡電話</div>\n                    <div className=\"font-medium\" data-testid=\"text-customer-phone\">\n                      {selectedBooking.customerPhone}\n                    </div>\n                  </div>\n                  <div className=\"col-span-2\">\n                    <div className=\"text-sm text-muted-foreground\">服務項目</div>\n                    <div className=\"font-medium\" data-testid=\"text-service-name\">\n                      {selectedBooking.serviceNames}\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">預估時間</div>\n                    <div className=\"font-medium\" data-testid=\"text-total-duration\">\n                      約 {selectedBooking.totalDuration} 分鐘\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">設計師</div>\n                    <div className=\"font-medium\" data-testid=\"text-stylist-name\">\n                      {selectedBooking.stylistName}\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">助理</div>\n                    <div className=\"font-medium\" data-testid=\"text-assistant-name\">\n                      {selectedBooking.assistantName || \"未指派\"}\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">預約日期</div>\n                    <div className=\"font-medium\" data-testid=\"text-booking-date\">\n                      {selectedBooking.bookingDate}\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">預約時間</div>\n                    <div className=\"font-medium\" data-testid=\"text-booking-time\">\n                      {selectedBooking.bookingTime}\n                    </div>\n                  </div>\n                </div>\n\n                {selectedBooking.customerEmail && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">Email</div>\n                    <div className=\"font-medium\" data-testid=\"text-customer-email\">\n                      {selectedBooking.customerEmail}\n                    </div>\n                  </div>\n                )}\n\n                {selectedBooking.customerLineId && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">LINE ID</div>\n                    <div className=\"font-medium\" data-testid=\"text-customer-line\">\n                      {selectedBooking.customerLineId}\n                    </div>\n                  </div>\n                )}\n\n                {selectedBooking.notes && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">備註</div>\n                    <div className=\"font-medium\" data-testid=\"text-booking-notes\">\n                      {selectedBooking.notes}\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <Label className=\"text-sm text-muted-foreground mb-2\">指派設計師</Label>\n                  <Select value={editStylistId} onValueChange={setEditStylistId}>\n                    <SelectTrigger data-testid=\"select-stylist\">\n                      <SelectValue placeholder=\"選擇設計師\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {designers.filter(d => d.isActive).map(designer => (\n                        <SelectItem key={designer.id} value={designer.id}>\n                          {designer.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label className=\"text-sm text-muted-foreground mb-2\">指派助理（選填）</Label>\n                  <Select value={editAssistantId} onValueChange={setEditAssistantId}>\n                    <SelectTrigger data-testid=\"select-assistant\">\n                      <SelectValue placeholder=\"選擇助理（可不選）\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"__none__\">不指派助理</SelectItem>\n                      {assistants.filter(a => a.isActive).map(assistant => (\n                        <SelectItem key={assistant.id} value={assistant.id}>\n                          {assistant.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label className=\"text-sm text-muted-foreground mb-2\">預約狀態</Label>\n                  <Select value={editStatus} onValueChange={setEditStatus}>\n                    <SelectTrigger data-testid=\"select-booking-status\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"pending\">待確認</SelectItem>\n                      <SelectItem value=\"confirmed\">已確認</SelectItem>\n                      <SelectItem value=\"completed\">已完成</SelectItem>\n                      <SelectItem value=\"cancelled\">已取消</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label className=\"text-sm text-muted-foreground\">目前狀態</Label>\n                  <Badge variant={getStatusBadgeVariant(selectedBooking.status)} data-testid=\"badge-current-status\">\n                    {getStatusText(selectedBooking.status)}\n                  </Badge>\n                </div>\n              </div>\n            )}\n            <DialogFooter className=\"flex flex-col sm:flex-row gap-2\">\n              {selectedBooking && selectedBooking.status === \"pending\" && (\n                <div className=\"flex gap-2 w-full sm:w-auto\">\n                  <Button\n                    variant=\"destructive\"\n                    onClick={() => {\n                      if (selectedBooking) {\n                        updateBookingMutation.mutate({ \n                          id: selectedBooking.id, \n                          updates: { status: \"cancelled\" } \n                        });\n                      }\n                    }}\n                    disabled={updateBookingMutation.isPending}\n                    className=\"flex-1 sm:flex-none\"\n                    data-testid=\"button-reject-booking\"\n                  >\n                    拒絕預約\n                  </Button>\n                  <Button\n                    variant=\"default\"\n                    onClick={() => {\n                      if (selectedBooking) {\n                        updateBookingMutation.mutate({ \n                          id: selectedBooking.id, \n                          updates: { status: \"confirmed\" } \n                        });\n                      }\n                    }}\n                    disabled={updateBookingMutation.isPending}\n                    className=\"flex-1 sm:flex-none\"\n                    data-testid=\"button-approve-booking\"\n                  >\n                    確認預約\n                  </Button>\n                </div>\n              )}\n              <div className=\"flex gap-2 w-full sm:w-auto sm:ml-auto\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setIsEditDialogOpen(false)}\n                  className=\"flex-1 sm:flex-none\"\n                  data-testid=\"button-cancel\"\n                >\n                  取消\n                </Button>\n                <Button\n                  onClick={handleUpdateBooking}\n                  disabled={updateBookingMutation.isPending}\n                  className=\"flex-1 sm:flex-none\"\n                  data-testid=\"button-update-booking\"\n                >\n                  {updateBookingMutation.isPending ? \"更新中...\" : \"更新預約\"}\n                </Button>\n              </div>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","size_bytes":17590},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"server/storage.ts":{"content":"import {\n  type User, type InsertUser,\n  type Customer, type InsertCustomer,\n  type Service, type InsertService,\n  type Staff, type InsertStaff,\n  type Booking, type InsertBooking,\n  type PurchaseRecord, type InsertPurchaseRecord,\n  type MarketingCampaign, type InsertMarketingCampaign,\n  type SeoSetting, type InsertSeoSetting,\n  users, customers, services, staff, bookings, purchaseRecords, marketingCampaigns, seoSettings\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { neon } from \"@neondatabase/serverless\";\nimport { drizzle } from \"drizzle-orm/neon-http\";\nimport { eq, and, desc } from \"drizzle-orm\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUserPassword(id: string, newPassword: string): Promise<User | undefined>;\n  \n  getAllCustomers(): Promise<Customer[]>;\n  getCustomer(id: string): Promise<Customer | undefined>;\n  getCustomerByPhone(phone: string): Promise<Customer | undefined>;\n  createCustomer(customer: InsertCustomer): Promise<Customer>;\n  updateCustomer(id: string, customer: Partial<InsertCustomer>): Promise<Customer | undefined>;\n  deleteCustomer(id: string): Promise<boolean>;\n  \n  getAllServices(): Promise<Service[]>;\n  getActiveServices(): Promise<Service[]>;\n  getService(id: string): Promise<Service | undefined>;\n  createService(service: InsertService): Promise<Service>;\n  updateService(id: string, service: Partial<InsertService>): Promise<Service | undefined>;\n  deleteService(id: string): Promise<boolean>;\n  \n  getAllStaff(): Promise<Staff[]>;\n  getActiveStaff(): Promise<Staff[]>;\n  getStaffByRole(role: string): Promise<Staff[]>;\n  getStaff(id: string): Promise<Staff | undefined>;\n  createStaff(staff: InsertStaff): Promise<Staff>;\n  updateStaff(id: string, staff: Partial<InsertStaff>): Promise<Staff | undefined>;\n  deleteStaff(id: string): Promise<boolean>;\n  \n  getAllBookings(): Promise<Booking[]>;\n  getBooking(id: string): Promise<Booking | undefined>;\n  getBookingsByDate(date: string): Promise<Booking[]>;\n  getBookingsByCustomer(customerId: string): Promise<Booking[]>;\n  createBooking(booking: InsertBooking): Promise<Booking>;\n  updateBooking(id: string, booking: Partial<InsertBooking>): Promise<Booking | undefined>;\n  deleteBooking(id: string): Promise<boolean>;\n  \n  getPurchaseRecordsByCustomer(customerId: string): Promise<PurchaseRecord[]>;\n  createPurchaseRecord(record: InsertPurchaseRecord): Promise<PurchaseRecord>;\n  \n  getAllMarketingCampaigns(): Promise<MarketingCampaign[]>;\n  getActiveMarketingCampaigns(): Promise<MarketingCampaign[]>;\n  getMarketingCampaign(id: string): Promise<MarketingCampaign | undefined>;\n  createMarketingCampaign(campaign: InsertMarketingCampaign): Promise<MarketingCampaign>;\n  updateMarketingCampaign(id: string, campaign: Partial<InsertMarketingCampaign>): Promise<MarketingCampaign | undefined>;\n  deleteMarketingCampaign(id: string): Promise<boolean>;\n  \n  getAllSeoSettings(): Promise<SeoSetting[]>;\n  getSeoSettingByPage(page: string): Promise<SeoSetting | undefined>;\n  createOrUpdateSeoSetting(setting: InsertSeoSetting): Promise<SeoSetting>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n  private customers: Map<string, Customer>;\n  private services: Map<string, Service>;\n  private staff: Map<string, Staff>;\n  private bookings: Map<string, Booking>;\n  private purchaseRecords: Map<string, PurchaseRecord>;\n  private marketingCampaigns: Map<string, MarketingCampaign>;\n  private seoSettings: Map<string, SeoSetting>;\n\n  constructor() {\n    this.users = new Map();\n    this.customers = new Map();\n    this.services = new Map();\n    this.staff = new Map();\n    this.bookings = new Map();\n    this.purchaseRecords = new Map();\n    this.marketingCampaigns = new Map();\n    this.seoSettings = new Map();\n    \n    this.initializeDefaultData();\n  }\n\n  private initializeDefaultData() {\n    const defaultAdminUser: InsertUser = {\n      username: \"yama3058\",\n      password: \"yama3058\"\n    };\n    const adminId = randomUUID();\n    this.users.set(adminId, { ...defaultAdminUser, id: adminId });\n\n    const defaultServices: InsertService[] = [\n      { name: \"洗髮\", description: \"舒適的洗髮體驗\", price: 250, priceNote: null, duration: 30, isActive: true },\n      { name: \"專業剪髮\", description: \"根據臉型設計專屬髮型\", price: 400, priceNote: null, duration: 60, isActive: true },\n      { name: \"時尚染髮\", description: \"使用頂級染劑\", price: 2000, priceNote: \"起\", duration: 120, isActive: true },\n      { name: \"質感燙髮\", description: \"自然捲度與蓬鬆感\", price: 2000, priceNote: \"起\", duration: 150, isActive: true },\n      { name: \"深層護髮\", description: \"深層修護受損髮質\", price: 800, priceNote: \"起\", duration: 45, isActive: true },\n    ];\n\n    defaultServices.forEach(service => {\n      const id = randomUUID();\n      this.services.set(id, { ...service, id, createdAt: new Date() });\n    });\n\n    const defaultStaff: InsertStaff[] = [\n      { \n        name: \"益安\", \n        role: \"設計師\",\n        email: null,\n        phone: null,\n        specialty: \"資深設計師（總監）\", \n        yearsOfExperience: 35,\n        photoUrl: null,\n        isActive: true \n      },\n      { \n        name: \"巧宣\", \n        role: \"設計師\",\n        email: null,\n        phone: null,\n        specialty: \"資深設計師\", \n        yearsOfExperience: 27,\n        photoUrl: null,\n        isActive: true \n      },\n    ];\n\n    defaultStaff.forEach(member => {\n      const id = randomUUID();\n      this.staff.set(id, { ...member, id, createdAt: new Date() });\n    });\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n\n  async updateUserPassword(id: string, newPassword: string): Promise<User | undefined> {\n    const user = this.users.get(id);\n    if (!user) return undefined;\n    const updated = { ...user, password: newPassword };\n    this.users.set(id, updated);\n    return updated;\n  }\n\n  async getAllCustomers(): Promise<Customer[]> {\n    return Array.from(this.customers.values()).sort((a, b) => \n      b.createdAt.getTime() - a.createdAt.getTime()\n    );\n  }\n\n  async getCustomer(id: string): Promise<Customer | undefined> {\n    return this.customers.get(id);\n  }\n\n  async getCustomerByPhone(phone: string): Promise<Customer | undefined> {\n    return Array.from(this.customers.values()).find(c => c.phone === phone);\n  }\n\n  async createCustomer(insertCustomer: InsertCustomer): Promise<Customer> {\n    const id = randomUUID();\n    const customer: Customer = { ...insertCustomer, id, createdAt: new Date() };\n    this.customers.set(id, customer);\n    return customer;\n  }\n\n  async updateCustomer(id: string, updates: Partial<InsertCustomer>): Promise<Customer | undefined> {\n    const customer = this.customers.get(id);\n    if (!customer) return undefined;\n    const updated = { ...customer, ...updates };\n    this.customers.set(id, updated);\n    return updated;\n  }\n\n  async deleteCustomer(id: string): Promise<boolean> {\n    return this.customers.delete(id);\n  }\n\n  async getAllServices(): Promise<Service[]> {\n    return Array.from(this.services.values()).sort((a, b) => \n      b.createdAt.getTime() - a.createdAt.getTime()\n    );\n  }\n\n  async getActiveServices(): Promise<Service[]> {\n    return Array.from(this.services.values())\n      .filter(s => s.isActive)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  async getService(id: string): Promise<Service | undefined> {\n    return this.services.get(id);\n  }\n\n  async createService(insertService: InsertService): Promise<Service> {\n    const id = randomUUID();\n    const service: Service = { ...insertService, id, createdAt: new Date() };\n    this.services.set(id, service);\n    return service;\n  }\n\n  async updateService(id: string, updates: Partial<InsertService>): Promise<Service | undefined> {\n    const service = this.services.get(id);\n    if (!service) return undefined;\n    const updated = { ...service, ...updates };\n    this.services.set(id, updated);\n    return updated;\n  }\n\n  async deleteService(id: string): Promise<boolean> {\n    return this.services.delete(id);\n  }\n\n  async getAllStaff(): Promise<Staff[]> {\n    return Array.from(this.staff.values()).sort((a, b) => \n      b.createdAt.getTime() - a.createdAt.getTime()\n    );\n  }\n\n  async getActiveStaff(): Promise<Staff[]> {\n    return Array.from(this.staff.values())\n      .filter(s => s.isActive)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  async getStaffByRole(role: string): Promise<Staff[]> {\n    return Array.from(this.staff.values())\n      .filter(s => s.role === role && s.isActive)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  async getStaff(id: string): Promise<Staff | undefined> {\n    return this.staff.get(id);\n  }\n\n  async createStaff(insertStaff: InsertStaff): Promise<Staff> {\n    const id = randomUUID();\n    const member: Staff = { ...insertStaff, id, createdAt: new Date() };\n    this.staff.set(id, member);\n    return member;\n  }\n\n  async updateStaff(id: string, updates: Partial<InsertStaff>): Promise<Staff | undefined> {\n    const member = this.staff.get(id);\n    if (!member) return undefined;\n    const updated = { ...member, ...updates };\n    this.staff.set(id, updated);\n    return updated;\n  }\n\n  async deleteStaff(id: string): Promise<boolean> {\n    return this.staff.delete(id);\n  }\n\n  async getAllBookings(): Promise<Booking[]> {\n    return Array.from(this.bookings.values()).sort((a, b) => \n      b.createdAt.getTime() - a.createdAt.getTime()\n    );\n  }\n\n  async getBooking(id: string): Promise<Booking | undefined> {\n    return this.bookings.get(id);\n  }\n\n  async getBookingsByDate(date: string): Promise<Booking[]> {\n    return Array.from(this.bookings.values())\n      .filter(b => b.bookingDate === date)\n      .sort((a, b) => a.bookingTime.localeCompare(b.bookingTime));\n  }\n\n  async getBookingsByCustomer(customerId: string): Promise<Booking[]> {\n    return Array.from(this.bookings.values())\n      .filter(b => b.customerId === customerId)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  async createBooking(insertBooking: InsertBooking): Promise<Booking> {\n    const id = randomUUID();\n    const booking: Booking = { ...insertBooking, id, createdAt: new Date() };\n    this.bookings.set(id, booking);\n    return booking;\n  }\n\n  async updateBooking(id: string, updates: Partial<InsertBooking>): Promise<Booking | undefined> {\n    const booking = this.bookings.get(id);\n    if (!booking) return undefined;\n    const updated = { ...booking, ...updates };\n    this.bookings.set(id, updated);\n    return updated;\n  }\n\n  async deleteBooking(id: string): Promise<boolean> {\n    return this.bookings.delete(id);\n  }\n\n  async getPurchaseRecordsByCustomer(customerId: string): Promise<PurchaseRecord[]> {\n    return Array.from(this.purchaseRecords.values())\n      .filter(r => r.customerId === customerId)\n      .sort((a, b) => b.purchaseDate.getTime() - a.purchaseDate.getTime());\n  }\n\n  async createPurchaseRecord(insertRecord: InsertPurchaseRecord): Promise<PurchaseRecord> {\n    const id = randomUUID();\n    const record: PurchaseRecord = { ...insertRecord, id, purchaseDate: new Date() };\n    this.purchaseRecords.set(id, record);\n    return record;\n  }\n\n  async getAllMarketingCampaigns(): Promise<MarketingCampaign[]> {\n    return Array.from(this.marketingCampaigns.values()).sort((a, b) => \n      b.createdAt.getTime() - a.createdAt.getTime()\n    );\n  }\n\n  async getActiveMarketingCampaigns(): Promise<MarketingCampaign[]> {\n    return Array.from(this.marketingCampaigns.values())\n      .filter(c => c.isActive)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  async getMarketingCampaign(id: string): Promise<MarketingCampaign | undefined> {\n    return this.marketingCampaigns.get(id);\n  }\n\n  async createMarketingCampaign(insertCampaign: InsertMarketingCampaign): Promise<MarketingCampaign> {\n    const id = randomUUID();\n    const campaign: MarketingCampaign = { ...insertCampaign, id, createdAt: new Date() };\n    this.marketingCampaigns.set(id, campaign);\n    return campaign;\n  }\n\n  async updateMarketingCampaign(id: string, updates: Partial<InsertMarketingCampaign>): Promise<MarketingCampaign | undefined> {\n    const campaign = this.marketingCampaigns.get(id);\n    if (!campaign) return undefined;\n    const updated = { ...campaign, ...updates };\n    this.marketingCampaigns.set(id, updated);\n    return updated;\n  }\n\n  async deleteMarketingCampaign(id: string): Promise<boolean> {\n    return this.marketingCampaigns.delete(id);\n  }\n\n  async getAllSeoSettings(): Promise<SeoSetting[]> {\n    return Array.from(this.seoSettings.values());\n  }\n\n  async getSeoSettingByPage(page: string): Promise<SeoSetting | undefined> {\n    return Array.from(this.seoSettings.values()).find(s => s.page === page);\n  }\n\n  async createOrUpdateSeoSetting(insertSetting: InsertSeoSetting): Promise<SeoSetting> {\n    const existing = await this.getSeoSettingByPage(insertSetting.page);\n    if (existing) {\n      const updated = { ...existing, ...insertSetting, updatedAt: new Date() };\n      this.seoSettings.set(existing.id, updated);\n      return updated;\n    }\n    const id = randomUUID();\n    const setting: SeoSetting = { ...insertSetting, id, updatedAt: new Date() };\n    this.seoSettings.set(id, setting);\n    return setting;\n  }\n}\n\nexport class DbStorage implements IStorage {\n  private db;\n\n  constructor() {\n    if (!process.env.DATABASE_URL) {\n      throw new Error(\"DATABASE_URL not configured\");\n    }\n    const sql = neon(process.env.DATABASE_URL);\n    this.db = drizzle(sql);\n    this.initializeDefaultData();\n  }\n\n  private async initializeDefaultData() {\n    const existingUser = await this.getUserByUsername(\"yama3058\");\n    if (!existingUser) {\n      await this.createUser({ username: \"yama3058\", password: \"yama3058\" });\n    }\n\n    const existingServices = await this.getAllServices();\n    if (existingServices.length === 0) {\n      const defaultServices: InsertService[] = [\n        { name: \"洗髮\", description: \"舒適的洗髮體驗\", price: 250, priceNote: null, duration: 30, isActive: true },\n        { name: \"專業剪髮\", description: \"根據臉型設計專屬髮型\", price: 400, priceNote: null, duration: 60, isActive: true },\n        { name: \"時尚染髮\", description: \"使用頂級染劑\", price: 2000, priceNote: \"起\", duration: 120, isActive: true },\n        { name: \"質感燙髮\", description: \"自然捲度與蓬鬆感\", price: 2000, priceNote: \"起\", duration: 150, isActive: true },\n        { name: \"深層護髮\", description: \"深層修護受損髮質\", price: 800, priceNote: \"起\", duration: 45, isActive: true },\n      ];\n      for (const service of defaultServices) {\n        await this.createService(service);\n      }\n    }\n\n    const existingStaff = await this.getAllStaff();\n    if (existingStaff.length === 0) {\n      const defaultStaff: InsertStaff[] = [\n        { \n          name: \"益安\", \n          role: \"設計師\",\n          email: null,\n          phone: null,\n          specialty: \"資深設計師（總監）\", \n          yearsOfExperience: 35,\n          photoUrl: \"/attached_assets/IMG_3685_1762423148235.jpeg\",\n          isActive: true \n        },\n        { \n          name: \"巧宣\", \n          role: \"設計師\",\n          email: null,\n          phone: null,\n          specialty: \"資深設計師\", \n          yearsOfExperience: 27,\n          photoUrl: \"/attached_assets/IMG_3684_1762423120471.jpeg\",\n          isActive: true \n        },\n      ];\n      for (const member of defaultStaff) {\n        await this.createStaff(member);\n      }\n    }\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await this.db.select().from(users).where(eq(users.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const result = await this.db.select().from(users).where(eq(users.username, username)).limit(1);\n    return result[0];\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const result = await this.db.insert(users).values(insertUser).returning();\n    return result[0];\n  }\n\n  async updateUserPassword(id: string, newPassword: string): Promise<User | undefined> {\n    const result = await this.db.update(users).set({ password: newPassword }).where(eq(users.id, id)).returning();\n    return result[0];\n  }\n\n  async getAllCustomers(): Promise<Customer[]> {\n    return this.db.select().from(customers).orderBy(desc(customers.createdAt));\n  }\n\n  async getCustomer(id: string): Promise<Customer | undefined> {\n    const result = await this.db.select().from(customers).where(eq(customers.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getCustomerByPhone(phone: string): Promise<Customer | undefined> {\n    const result = await this.db.select().from(customers).where(eq(customers.phone, phone)).limit(1);\n    return result[0];\n  }\n\n  async createCustomer(insertCustomer: InsertCustomer): Promise<Customer> {\n    const result = await this.db.insert(customers).values(insertCustomer).returning();\n    return result[0];\n  }\n\n  async updateCustomer(id: string, updates: Partial<InsertCustomer>): Promise<Customer | undefined> {\n    const result = await this.db.update(customers).set(updates).where(eq(customers.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteCustomer(id: string): Promise<boolean> {\n    const result = await this.db.delete(customers).where(eq(customers.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getAllServices(): Promise<Service[]> {\n    return this.db.select().from(services).orderBy(desc(services.createdAt));\n  }\n\n  async getActiveServices(): Promise<Service[]> {\n    return this.db.select().from(services).where(eq(services.isActive, true)).orderBy(desc(services.createdAt));\n  }\n\n  async getService(id: string): Promise<Service | undefined> {\n    const result = await this.db.select().from(services).where(eq(services.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createService(insertService: InsertService): Promise<Service> {\n    const result = await this.db.insert(services).values(insertService).returning();\n    return result[0];\n  }\n\n  async updateService(id: string, updates: Partial<InsertService>): Promise<Service | undefined> {\n    const result = await this.db.update(services).set(updates).where(eq(services.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteService(id: string): Promise<boolean> {\n    const result = await this.db.delete(services).where(eq(services.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getAllStaff(): Promise<Staff[]> {\n    return this.db.select().from(staff).orderBy(desc(staff.createdAt));\n  }\n\n  async getActiveStaff(): Promise<Staff[]> {\n    return this.db.select().from(staff).where(eq(staff.isActive, true)).orderBy(desc(staff.createdAt));\n  }\n\n  async getStaffByRole(role: string): Promise<Staff[]> {\n    return this.db.select().from(staff).where(and(eq(staff.role, role), eq(staff.isActive, true))).orderBy(desc(staff.createdAt));\n  }\n\n  async getStaff(id: string): Promise<Staff | undefined> {\n    const result = await this.db.select().from(staff).where(eq(staff.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createStaff(insertStaff: InsertStaff): Promise<Staff> {\n    const result = await this.db.insert(staff).values(insertStaff).returning();\n    return result[0];\n  }\n\n  async updateStaff(id: string, updates: Partial<InsertStaff>): Promise<Staff | undefined> {\n    const result = await this.db.update(staff).set(updates).where(eq(staff.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteStaff(id: string): Promise<boolean> {\n    const result = await this.db.delete(staff).where(eq(staff.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getAllBookings(): Promise<Booking[]> {\n    return this.db.select().from(bookings).orderBy(desc(bookings.createdAt));\n  }\n\n  async getBooking(id: string): Promise<Booking | undefined> {\n    const result = await this.db.select().from(bookings).where(eq(bookings.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getBookingsByDate(date: string): Promise<Booking[]> {\n    return this.db.select().from(bookings).where(eq(bookings.bookingDate, date));\n  }\n\n  async getBookingsByCustomer(customerId: string): Promise<Booking[]> {\n    return this.db.select().from(bookings).where(eq(bookings.customerId, customerId));\n  }\n\n  async createBooking(insertBooking: InsertBooking): Promise<Booking> {\n    const result = await this.db.insert(bookings).values(insertBooking).returning();\n    return result[0];\n  }\n\n  async updateBooking(id: string, updates: Partial<InsertBooking>): Promise<Booking | undefined> {\n    const result = await this.db.update(bookings).set(updates).where(eq(bookings.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteBooking(id: string): Promise<boolean> {\n    const result = await this.db.delete(bookings).where(eq(bookings.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getPurchaseRecordsByCustomer(customerId: string): Promise<PurchaseRecord[]> {\n    return this.db.select().from(purchaseRecords).where(eq(purchaseRecords.customerId, customerId));\n  }\n\n  async createPurchaseRecord(record: InsertPurchaseRecord): Promise<PurchaseRecord> {\n    const result = await this.db.insert(purchaseRecords).values(record).returning();\n    return result[0];\n  }\n\n  async getAllMarketingCampaigns(): Promise<MarketingCampaign[]> {\n    return this.db.select().from(marketingCampaigns).orderBy(desc(marketingCampaigns.createdAt));\n  }\n\n  async getActiveMarketingCampaigns(): Promise<MarketingCampaign[]> {\n    return this.db.select().from(marketingCampaigns).where(eq(marketingCampaigns.isActive, true)).orderBy(desc(marketingCampaigns.createdAt));\n  }\n\n  async getMarketingCampaign(id: string): Promise<MarketingCampaign | undefined> {\n    const result = await this.db.select().from(marketingCampaigns).where(eq(marketingCampaigns.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createMarketingCampaign(insertCampaign: InsertMarketingCampaign): Promise<MarketingCampaign> {\n    const result = await this.db.insert(marketingCampaigns).values(insertCampaign).returning();\n    return result[0];\n  }\n\n  async updateMarketingCampaign(id: string, updates: Partial<InsertMarketingCampaign>): Promise<MarketingCampaign | undefined> {\n    const result = await this.db.update(marketingCampaigns).set(updates).where(eq(marketingCampaigns.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteMarketingCampaign(id: string): Promise<boolean> {\n    const result = await this.db.delete(marketingCampaigns).where(eq(marketingCampaigns.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getAllSeoSettings(): Promise<SeoSetting[]> {\n    return this.db.select().from(seoSettings);\n  }\n\n  async getSeoSettingByPage(page: string): Promise<SeoSetting | undefined> {\n    const result = await this.db.select().from(seoSettings).where(eq(seoSettings.page, page)).limit(1);\n    return result[0];\n  }\n\n  async createOrUpdateSeoSetting(insertSetting: InsertSeoSetting): Promise<SeoSetting> {\n    const existing = await this.getSeoSettingByPage(insertSetting.page);\n    if (existing) {\n      const result = await this.db.update(seoSettings).set({ ...insertSetting, updatedAt: new Date() }).where(eq(seoSettings.id, existing.id)).returning();\n      return result[0];\n    }\n    const result = await this.db.insert(seoSettings).values(insertSetting).returning();\n    return result[0];\n  }\n}\n\nexport const storage = new DbStorage();\n","size_bytes":24153},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/pages/AdminStaff.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { Plus, Pencil, Trash2, User, LogOut, Upload, X } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport type { Staff, InsertStaff } from \"@shared/schema\";\nimport { insertStaffSchema } from \"@shared/schema\";\n\nexport default function AdminStaff() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingStaff, setEditingStaff] = useState<Staff | null>(null);\n  const [uploadingPhoto, setUploadingPhoto] = useState(false);\n  const [photoPreview, setPhotoPreview] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const { data: staff = [], isLoading } = useQuery<Staff[]>({\n    queryKey: [\"/api/staff\"],\n  });\n\n  const form = useForm<InsertStaff>({\n    resolver: zodResolver(insertStaffSchema),\n    defaultValues: {\n      name: \"\",\n      role: \"設計師\",\n      email: null,\n      phone: null,\n      specialty: \"\",\n      yearsOfExperience: 0,\n      photoUrl: null,\n      isActive: true,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertStaff) => {\n      const response = await fetch(\"/api/staff\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to create staff\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/staff\"] });\n      toast({ title: \"成功\", description: \"已新增員工\" });\n      handleCloseDialog();\n    },\n    onError: () => {\n      toast({ title: \"錯誤\", description: \"新增員工失敗\", variant: \"destructive\" });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertStaff> }) => {\n      const response = await fetch(`/api/staff/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to update staff\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/staff\"] });\n      toast({ title: \"成功\", description: \"已更新員工資料\" });\n      handleCloseDialog();\n    },\n    onError: () => {\n      toast({ title: \"錯誤\", description: \"更新員工失敗\", variant: \"destructive\" });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await fetch(`/api/staff/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete staff\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/staff\"] });\n      toast({ title: \"成功\", description: \"已刪除員工\" });\n    },\n    onError: () => {\n      toast({ title: \"錯誤\", description: \"刪除員工失敗\", variant: \"destructive\" });\n    },\n  });\n\n  const handlePhotoUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith(\"image/\")) {\n      toast({ title: \"錯誤\", description: \"請選擇圖片文件\", variant: \"destructive\" });\n      return;\n    }\n\n    // Validate file size (5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      toast({ title: \"錯誤\", description: \"圖片大小不能超過5MB\", variant: \"destructive\" });\n      return;\n    }\n\n    // Show preview\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      setPhotoPreview(e.target?.result as string);\n    };\n    reader.readAsDataURL(file);\n\n    // Upload to server\n    setUploadingPhoto(true);\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n\n    try {\n      const response = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) throw new Error(\"上傳失敗\");\n\n      const data = await response.json();\n      form.setValue(\"photoUrl\", data.photoUrl);\n      toast({ title: \"成功\", description: \"照片上傳成功\" });\n    } catch (error) {\n      toast({ title: \"錯誤\", description: \"照片上傳失敗\", variant: \"destructive\" });\n      setPhotoPreview(null);\n    } finally {\n      setUploadingPhoto(false);\n    }\n  };\n\n  const handleRemovePhoto = () => {\n    setPhotoPreview(null);\n    form.setValue(\"photoUrl\", null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const handleEdit = (member: Staff) => {\n    setEditingStaff(member);\n    setPhotoPreview(member.photoUrl);\n    form.reset({\n      name: member.name,\n      role: member.role,\n      email: member.email,\n      phone: member.phone,\n      specialty: member.specialty || \"\",\n      yearsOfExperience: member.yearsOfExperience || 0,\n      photoUrl: member.photoUrl,\n      isActive: member.isActive,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleSubmit = (data: InsertStaff) => {\n    if (editingStaff) {\n      updateMutation.mutate({ id: editingStaff.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setEditingStaff(null);\n    setPhotoPreview(null);\n    form.reset();\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const designers = staff.filter(s => s.role === \"設計師\");\n  const assistants = staff.filter(s => s.role === \"助理\");\n\n  return (\n    <div className=\"min-h-screen bg-muted/30 py-8\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <h1 className=\"text-4xl font-serif font-bold mb-2\">員工管理</h1>\n            <p className=\"text-muted-foreground\">管理設計師和助理</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" onClick={() => setLocation(\"/admin/dashboard\")} data-testid=\"button-back\">\n              返回\n            </Button>\n            <Button variant=\"outline\" onClick={() => setLocation(\"/admin\")} data-testid=\"button-logout\">\n              <LogOut className=\"w-4 h-4 mr-2\" />\n              登出\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n            <DialogTrigger asChild>\n              <Button onClick={() => setEditingStaff(null)} data-testid=\"button-add-staff\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                新增員工\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>{editingStaff ? \"編輯員工\" : \"新增員工\"}</DialogTitle>\n                <DialogDescription>\n                  {editingStaff ? \"修改員工資料\" : \"填寫新員工資料\"}\n                </DialogDescription>\n              </DialogHeader>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>姓名 *</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"請輸入姓名\" data-testid=\"input-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"role\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>職位 *</FormLabel>\n                        <Select onValueChange={field.onChange} value={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-role\">\n                              <SelectValue placeholder=\"選擇職位\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"設計師\">設計師</SelectItem>\n                            <SelectItem value=\"助理\">助理</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Email</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            value={field.value || \"\"} \n                            type=\"email\"\n                            placeholder=\"email@example.com\" \n                            data-testid=\"input-email\" \n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"phone\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>電話</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            value={field.value || \"\"} \n                            placeholder=\"例：0912-345-678\" \n                            data-testid=\"input-phone\" \n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"specialty\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>專長</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} placeholder=\"例：資深設計師\" data-testid=\"input-specialty\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"yearsOfExperience\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>年資</FormLabel>\n                        <FormControl>\n                          <Input \n                            type=\"number\" \n                            value={field.value || 0}\n                            onChange={(e) => field.onChange(e.target.valueAsNumber || 0)}\n                            placeholder=\"經驗年數\" \n                            data-testid=\"input-years\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  {/* Photo Upload Section */}\n                  <div className=\"space-y-2\">\n                    <Label>照片</Label>\n                    <div className=\"flex items-start gap-4\">\n                      {/* Photo Preview */}\n                      <div className=\"flex-shrink-0\">\n                        <Avatar className=\"w-32 h-32 border-2\">\n                          {photoPreview ? (\n                            <AvatarImage src={photoPreview} alt=\"預覽\" className=\"object-cover\" />\n                          ) : (\n                            <AvatarFallback>\n                              <User className=\"w-16 h-16 text-muted-foreground\" />\n                            </AvatarFallback>\n                          )}\n                        </Avatar>\n                      </div>\n\n                      {/* Upload Controls */}\n                      <div className=\"flex-1 space-y-2\">\n                        <input\n                          ref={fileInputRef}\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handlePhotoUpload}\n                          className=\"hidden\"\n                          data-testid=\"input-photo-file\"\n                        />\n                        <div className=\"flex gap-2\">\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => fileInputRef.current?.click()}\n                            disabled={uploadingPhoto}\n                            data-testid=\"button-upload-photo\"\n                          >\n                            <Upload className=\"w-4 h-4 mr-2\" />\n                            {uploadingPhoto ? \"上傳中...\" : \"上傳照片\"}\n                          </Button>\n                          {photoPreview && (\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={handleRemovePhoto}\n                              disabled={uploadingPhoto}\n                              data-testid=\"button-remove-photo\"\n                            >\n                              <X className=\"w-4 h-4 mr-2\" />\n                              移除照片\n                            </Button>\n                          )}\n                        </div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          支援 JPG、PNG、GIF、WebP 格式，最大 5MB\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end gap-2\">\n                    <Button type=\"button\" variant=\"outline\" onClick={handleCloseDialog} data-testid=\"button-cancel\">\n                      取消\n                    </Button>\n                    <Button type=\"submit\" disabled={createMutation.isPending || updateMutation.isPending} data-testid=\"button-submit\">\n                      {editingStaff ? \"更新\" : \"新增\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>設計師 ({designers.length})</CardTitle>\n              <CardDescription>管理髮型設計師</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n              ) : designers.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">尚無設計師</div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {designers.map((member) => (\n                    <Card key={member.id} className=\"hover-elevate\" data-testid={`card-staff-${member.id}`}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex items-start gap-3 flex-1\">\n                            <Avatar className=\"w-12 h-12 flex-shrink-0\">\n                              {member.photoUrl ? (\n                                <AvatarImage src={member.photoUrl} alt={member.name} className=\"object-cover\" />\n                              ) : (\n                                <AvatarFallback>\n                                  <User className=\"w-6 h-6 text-primary\" />\n                                </AvatarFallback>\n                              )}\n                            </Avatar>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <h3 className=\"font-semibold\">{member.name}</h3>\n                                {!member.isActive && <Badge variant=\"secondary\">已停用</Badge>}\n                              </div>\n                              {member.specialty && (\n                                <p className=\"text-sm text-muted-foreground\">{member.specialty}</p>\n                              )}\n                              {member.yearsOfExperience && (\n                                <p className=\"text-xs text-muted-foreground mt-1\">\n                                  {member.yearsOfExperience} 年經驗\n                                </p>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"flex gap-1\">\n                            <Button \n                              size=\"icon\" \n                              variant=\"ghost\"\n                              onClick={() => handleEdit(member)}\n                              data-testid={`button-edit-${member.id}`}\n                            >\n                              <Pencil className=\"w-4 h-4\" />\n                            </Button>\n                            <Button \n                              size=\"icon\" \n                              variant=\"ghost\"\n                              onClick={() => deleteMutation.mutate(member.id)}\n                              data-testid={`button-delete-${member.id}`}\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>助理 ({assistants.length})</CardTitle>\n              <CardDescription>管理美髮助理</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n              ) : assistants.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">尚無助理</div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {assistants.map((member) => (\n                    <Card key={member.id} className=\"hover-elevate\" data-testid={`card-staff-${member.id}`}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex items-start gap-3 flex-1\">\n                            <Avatar className=\"w-12 h-12 flex-shrink-0\">\n                              {member.photoUrl ? (\n                                <AvatarImage src={member.photoUrl} alt={member.name} className=\"object-cover\" />\n                              ) : (\n                                <AvatarFallback>\n                                  <User className=\"w-6 h-6 text-primary\" />\n                                </AvatarFallback>\n                              )}\n                            </Avatar>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <h3 className=\"font-semibold\">{member.name}</h3>\n                                {!member.isActive && <Badge variant=\"secondary\">已停用</Badge>}\n                              </div>\n                              {member.specialty && (\n                                <p className=\"text-sm text-muted-foreground\">{member.specialty}</p>\n                              )}\n                              {member.yearsOfExperience && (\n                                <p className=\"text-xs text-muted-foreground mt-1\">\n                                  {member.yearsOfExperience} 年經驗\n                                </p>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"flex gap-1\">\n                            <Button \n                              size=\"icon\" \n                              variant=\"ghost\"\n                              onClick={() => handleEdit(member)}\n                              data-testid={`button-edit-${member.id}`}\n                            >\n                              <Pencil className=\"w-4 h-4\" />\n                            </Button>\n                            <Button \n                              size=\"icon\" \n                              variant=\"ghost\"\n                              onClick={() => deleteMutation.mutate(member.id)}\n                              data-testid={`button-delete-${member.id}`}\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":22776},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/StylistCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\n\ninterface StylistCardProps {\n  name: string;\n  specialty: string;\n  experience: string;\n  image: string;\n}\n\nexport default function StylistCard({ name, specialty, experience, image }: StylistCardProps) {\n  return (\n    <Card className=\"overflow-hidden hover-elevate\">\n      <div className=\"bg-gradient-to-b from-primary/5 to-primary/10 py-8 px-6\">\n        <Avatar className=\"w-32 h-32 mx-auto border-4 border-background shadow-lg\">\n          <AvatarImage src={image} alt={name} className=\"object-cover\" />\n          <AvatarFallback className=\"text-2xl bg-background\">{name[0]}</AvatarFallback>\n        </Avatar>\n      </div>\n      <CardContent className=\"p-6 text-center\">\n        <h3 className=\"text-xl font-serif font-semibold mb-2\">{name}</h3>\n        <p className=\"text-primary text-sm font-medium mb-2\">{specialty}</p>\n        <p className=\"text-muted-foreground text-sm\">{experience}</p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1071},"client/src/components/examples/Footer.tsx":{"content":"import Footer from '../Footer';\n\nexport default function FooterExample() {\n  return <Footer />;\n}\n","size_bytes":98},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/examples/AdminDashboard.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport AdminDashboard from '../../pages/AdminDashboard';\n\nexport default function AdminDashboardExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AdminDashboard />\n    </QueryClientProvider>\n  );\n}\n","size_bytes":335},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport {\n  insertCustomerSchema,\n  insertServiceSchema,\n  insertStaffSchema,\n  insertBookingSchema,\n  insertPurchaseRecordSchema,\n  insertMarketingCampaignSchema,\n  insertSeoSettingSchema\n} from \"@shared/schema\";\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n// Configure multer for file uploads\nconst storageConfig = multer.diskStorage({\n  destination: (_req, _file, cb) => {\n    cb(null, path.join(__dirname, \"..\", \"attached_assets\"));\n  },\n  filename: (_req, file, cb) => {\n    const uniqueSuffix = Date.now();\n    const ext = path.extname(file.originalname);\n    const basename = path.basename(file.originalname, ext);\n    cb(null, `${basename}_${uniqueSuffix}${ext}`);\n  },\n});\n\nconst upload = multer({ \n  storage: storageConfig,\n  limits: { fileSize: 5 * 1024 * 1024 }, // 5MB limit\n  fileFilter: (_req, file, cb) => {\n    const allowedTypes = /jpeg|jpg|png|gif|webp/;\n    const extname = allowedTypes.test(path.extname(file.originalname).toLowerCase());\n    const mimetype = allowedTypes.test(file.mimetype);\n    if (extname && mimetype) {\n      cb(null, true);\n    } else {\n      cb(new Error(\"只允許上傳圖片文件\"));\n    }\n  },\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // File upload endpoint\n  app.post(\"/api/upload\", upload.single(\"photo\"), (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"請選擇要上傳的圖片\" });\n      }\n      const photoUrl = `/attached_assets/${req.file.filename}`;\n      res.json({ photoUrl });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Customers\n  app.get(\"/api/customers\", async (_req, res) => {\n    const customers = await storage.getAllCustomers();\n    res.json(customers);\n  });\n\n  app.get(\"/api/customers/:id\", async (req, res) => {\n    const customer = await storage.getCustomer(req.params.id);\n    if (!customer) return res.status(404).json({ error: \"Customer not found\" });\n    res.json(customer);\n  });\n\n  app.post(\"/api/customers\", async (req, res) => {\n    try {\n      const data = insertCustomerSchema.parse(req.body);\n      const customer = await storage.createCustomer(data);\n      res.json(customer);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const customer = await storage.updateCustomer(req.params.id, req.body);\n      if (!customer) return res.status(404).json({ error: \"Customer not found\" });\n      res.json(customer);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/customers/:id\", async (req, res) => {\n    const success = await storage.deleteCustomer(req.params.id);\n    if (!success) return res.status(404).json({ error: \"Customer not found\" });\n    res.json({ success: true });\n  });\n\n  // Services\n  app.get(\"/api/services\", async (_req, res) => {\n    const services = await storage.getAllServices();\n    res.json(services);\n  });\n\n  app.get(\"/api/services/active\", async (_req, res) => {\n    const services = await storage.getActiveServices();\n    res.json(services);\n  });\n\n  app.get(\"/api/services/:id\", async (req, res) => {\n    const service = await storage.getService(req.params.id);\n    if (!service) return res.status(404).json({ error: \"Service not found\" });\n    res.json(service);\n  });\n\n  app.post(\"/api/services\", async (req, res) => {\n    try {\n      const data = insertServiceSchema.parse(req.body);\n      const service = await storage.createService(data);\n      res.json(service);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/services/:id\", async (req, res) => {\n    try {\n      const service = await storage.updateService(req.params.id, req.body);\n      if (!service) return res.status(404).json({ error: \"Service not found\" });\n      res.json(service);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/services/:id\", async (req, res) => {\n    const success = await storage.deleteService(req.params.id);\n    if (!success) return res.status(404).json({ error: \"Service not found\" });\n    res.json({ success: true });\n  });\n\n  // Staff\n  app.get(\"/api/staff\", async (_req, res) => {\n    const staff = await storage.getAllStaff();\n    res.json(staff);\n  });\n\n  app.get(\"/api/staff/active\", async (_req, res) => {\n    const staff = await storage.getActiveStaff();\n    res.json(staff);\n  });\n\n  app.get(\"/api/staff/role/:role\", async (req, res) => {\n    const staff = await storage.getStaffByRole(req.params.role);\n    res.json(staff);\n  });\n\n  app.get(\"/api/staff/:id\", async (req, res) => {\n    const member = await storage.getStaff(req.params.id);\n    if (!member) return res.status(404).json({ error: \"Staff member not found\" });\n    res.json(member);\n  });\n\n  app.post(\"/api/staff\", async (req, res) => {\n    try {\n      const data = insertStaffSchema.parse(req.body);\n      const member = await storage.createStaff(data);\n      res.json(member);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/staff/:id\", async (req, res) => {\n    try {\n      const member = await storage.updateStaff(req.params.id, req.body);\n      if (!member) return res.status(404).json({ error: \"Staff member not found\" });\n      res.json(member);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/staff/:id\", async (req, res) => {\n    const success = await storage.deleteStaff(req.params.id);\n    if (!success) return res.status(404).json({ error: \"Staff member not found\" });\n    res.json({ success: true });\n  });\n\n  // Bookings\n  app.get(\"/api/bookings\", async (_req, res) => {\n    const bookings = await storage.getAllBookings();\n    res.json(bookings);\n  });\n\n  app.get(\"/api/bookings/date/:date\", async (req, res) => {\n    const bookings = await storage.getBookingsByDate(req.params.date);\n    res.json(bookings);\n  });\n\n  app.get(\"/api/bookings/customer/:customerId\", async (req, res) => {\n    const bookings = await storage.getBookingsByCustomer(req.params.customerId);\n    res.json(bookings);\n  });\n\n  app.get(\"/api/bookings/:id\", async (req, res) => {\n    const booking = await storage.getBooking(req.params.id);\n    if (!booking) return res.status(404).json({ error: \"Booking not found\" });\n    res.json(booking);\n  });\n\n  app.post(\"/api/bookings\", async (req, res) => {\n    try {\n      const data = insertBookingSchema.parse(req.body);\n      const booking = await storage.createBooking(data);\n      \n      let customerId = booking.customerId;\n      if (!customerId && booking.customerPhone) {\n        let customer = await storage.getCustomerByPhone(booking.customerPhone);\n        if (!customer) {\n          customer = await storage.createCustomer({\n            name: booking.customerName,\n            phone: booking.customerPhone,\n            lineId: booking.customerLineId || null,\n            email: null,\n            notes: null\n          });\n        }\n        customerId = customer.id;\n        await storage.updateBooking(booking.id, { customerId });\n      }\n      \n      res.json(booking);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/bookings/:id\", async (req, res) => {\n    try {\n      const booking = await storage.updateBooking(req.params.id, req.body);\n      if (!booking) return res.status(404).json({ error: \"Booking not found\" });\n      res.json(booking);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/bookings/:id\", async (req, res) => {\n    const success = await storage.deleteBooking(req.params.id);\n    if (!success) return res.status(404).json({ error: \"Booking not found\" });\n    res.json({ success: true });\n  });\n\n  // Purchase Records\n  app.get(\"/api/purchase-records/customer/:customerId\", async (req, res) => {\n    const records = await storage.getPurchaseRecordsByCustomer(req.params.customerId);\n    res.json(records);\n  });\n\n  app.post(\"/api/purchase-records\", async (req, res) => {\n    try {\n      const data = insertPurchaseRecordSchema.parse(req.body);\n      const record = await storage.createPurchaseRecord(data);\n      res.json(record);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Marketing Campaigns\n  app.get(\"/api/marketing-campaigns\", async (_req, res) => {\n    const campaigns = await storage.getAllMarketingCampaigns();\n    res.json(campaigns);\n  });\n\n  app.get(\"/api/marketing-campaigns/active\", async (_req, res) => {\n    const campaigns = await storage.getActiveMarketingCampaigns();\n    res.json(campaigns);\n  });\n\n  app.get(\"/api/marketing-campaigns/:id\", async (req, res) => {\n    const campaign = await storage.getMarketingCampaign(req.params.id);\n    if (!campaign) return res.status(404).json({ error: \"Campaign not found\" });\n    res.json(campaign);\n  });\n\n  app.post(\"/api/marketing-campaigns\", async (req, res) => {\n    try {\n      const data = insertMarketingCampaignSchema.parse(req.body);\n      const campaign = await storage.createMarketingCampaign(data);\n      res.json(campaign);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/marketing-campaigns/:id\", async (req, res) => {\n    try {\n      const campaign = await storage.updateMarketingCampaign(req.params.id, req.body);\n      if (!campaign) return res.status(404).json({ error: \"Campaign not found\" });\n      res.json(campaign);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/marketing-campaigns/:id\", async (req, res) => {\n    const success = await storage.deleteMarketingCampaign(req.params.id);\n    if (!success) return res.status(404).json({ error: \"Campaign not found\" });\n    res.json({ success: true });\n  });\n\n  // Auth & User Management\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n      const user = await storage.getUserByUsername(username);\n      \n      if (!user || user.password !== password) {\n        return res.status(401).json({ error: \"帳號或密碼錯誤\" });\n      }\n      \n      res.json({ success: true, user: { id: user.id, username: user.username } });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/auth/change-password\", async (req, res) => {\n    try {\n      const { username, oldPassword, newPassword } = req.body;\n      const user = await storage.getUserByUsername(username);\n      \n      if (!user || user.password !== oldPassword) {\n        return res.status(401).json({ error: \"當前密碼錯誤\" });\n      }\n      \n      const updated = await storage.updateUserPassword(user.id, newPassword);\n      if (!updated) return res.status(404).json({ error: \"更新失敗\" });\n      \n      res.json({ success: true });\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // SEO Settings\n  app.get(\"/api/seo-settings\", async (_req, res) => {\n    const settings = await storage.getAllSeoSettings();\n    res.json(settings);\n  });\n\n  app.get(\"/api/seo-settings/:page\", async (req, res) => {\n    const setting = await storage.getSeoSettingByPage(req.params.page);\n    if (!setting) return res.status(404).json({ error: \"SEO setting not found\" });\n    res.json(setting);\n  });\n\n  app.post(\"/api/seo-settings\", async (req, res) => {\n    try {\n      const data = insertSeoSettingSchema.parse(req.body);\n      const setting = await storage.createOrUpdateSeoSetting(data);\n      res.json(setting);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":12179},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Navbar from \"@/components/Navbar\";\nimport Footer from \"@/components/Footer\";\nimport Home from \"@/pages/Home\";\nimport Services from \"@/pages/Services\";\nimport Team from \"@/pages/Team\";\nimport Booking from \"@/pages/Booking\";\nimport Contact from \"@/pages/Contact\";\nimport AdminLogin from \"@/pages/AdminLogin\";\nimport AdminDashboard from \"@/pages/AdminDashboard\";\nimport AdminCalendar from \"@/pages/AdminCalendar\";\nimport AdminCustomers from \"@/pages/AdminCustomers\";\nimport AdminServices from \"@/pages/AdminServices\";\nimport AdminStaff from \"@/pages/AdminStaff\";\nimport AdminMarketing from \"@/pages/AdminMarketing\";\nimport AdminSEO from \"@/pages/AdminSEO\";\nimport AdminChangePassword from \"@/pages/AdminChangePassword\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/services\" component={Services} />\n      <Route path=\"/team\" component={Team} />\n      <Route path=\"/booking\" component={Booking} />\n      <Route path=\"/contact\" component={Contact} />\n      <Route path=\"/admin\" component={AdminLogin} />\n      <Route path=\"/admin/dashboard\" component={AdminDashboard} />\n      <Route path=\"/admin/calendar\" component={AdminCalendar} />\n      <Route path=\"/admin/customers\" component={AdminCustomers} />\n      <Route path=\"/admin/services\" component={AdminServices} />\n      <Route path=\"/admin/staff\" component={AdminStaff} />\n      <Route path=\"/admin/marketing\" component={AdminMarketing} />\n      <Route path=\"/admin/seo\" component={AdminSEO} />\n      <Route path=\"/admin/change-password\" component={AdminChangePassword} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <div className=\"flex flex-col min-h-screen\">\n          <Route path=\"/admin/*\">\n            {() => null}\n          </Route>\n          <Route path=\"/((?!admin).*)\">\n            {() => <Navbar />}\n          </Route>\n          \n          <main className=\"flex-1\">\n            <Router />\n          </main>\n          \n          <Route path=\"/((?!admin).*)\">\n            {() => <Footer />}\n          </Route>\n        </div>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2576},"client/src/components/examples/Home.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport Home from '../../pages/Home';\n\nexport default function HomeExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Home />\n    </QueryClientProvider>\n  );\n}\n","size_bytes":295},"client/src/components/examples/ServiceCard.tsx":{"content":"import ServiceCard from '../ServiceCard';\nimport serviceImage from '@assets/generated_images/Hair_cutting_service_ac14a7f9.png';\n\nexport default function ServiceCardExample() {\n  return (\n    <div className=\"p-8 max-w-sm\">\n      <ServiceCard \n        title=\"專業剪髮\"\n        description=\"根據您的臉型與個性，打造專屬於您的髮型\"\n        price=\"NT$ 800 起\"\n        image={serviceImage}\n      />\n    </div>\n  );\n}\n","size_bytes":436},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/examples/Contact.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport Contact from '../../pages/Contact';\n\nexport default function ContactExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Contact />\n    </QueryClientProvider>\n  );\n}\n","size_bytes":307},"client/src/pages/AdminLogin.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Lock } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function AdminLogin() {\n  const [, setLocation] = useLocation();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { toast } = useToast();\n\n  const loginMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ username, password }),\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"登入失敗\");\n      }\n      return response.json();\n    },\n    onSuccess: (data) => {\n      localStorage.setItem(\"adminUser\", JSON.stringify(data.user));\n      toast({ title: \"登入成功\" });\n      setLocation(\"/admin/dashboard\");\n    },\n    onError: (error: Error) => {\n      toast({ \n        title: \"登入失敗\", \n        description: error.message,\n        variant: \"destructive\" \n      });\n    },\n  });\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate();\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center py-12 px-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Lock className=\"w-8 h-8 text-primary\" />\n          </div>\n          <CardTitle className=\"text-3xl font-serif\">後台管理</CardTitle>\n          <CardDescription>請輸入您的帳號密碼</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"username\">帳號</Label>\n              <Input\n                id=\"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                placeholder=\"請輸入帳號\"\n                required\n                data-testid=\"input-username\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"password\">密碼</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"請輸入密碼\"\n                required\n                data-testid=\"input-password\"\n              />\n            </div>\n            <Button \n              type=\"submit\" \n              className=\"w-full\" \n              disabled={loginMutation.isPending}\n              data-testid=\"button-login\"\n            >\n              {loginMutation.isPending ? \"登入中...\" : \"登入\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3327},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/pages/Home.tsx":{"content":"import { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Scissors, Palette, Waves, Sparkles, Heart, Star, Phone, MapPin, Clock, Award, Users, CheckCircle2 } from \"lucide-react\";\nimport { SiLine } from \"react-icons/si\";\nimport teamPhoto from \"@assets/IMG_3687_1762425091046.jpeg\";\n\nexport default function Home() {\n  const services = [\n    {\n      title: \"專業剪髮\",\n      description: \"根據臉型設計專屬髮型，展現個人魅力\",\n      price: \"NT$ 400\",\n      icon: Scissors,\n    },\n    {\n      title: \"時尚染髮\",\n      description: \"頂級染劑呈現完美色澤，持久亮麗\",\n      price: \"NT$ 2,000 起\",\n      icon: Palette,\n    },\n    {\n      title: \"質感燙髮\",\n      description: \"溫和藥水打造自然捲度，減少髮質傷害\",\n      price: \"NT$ 2,000 起\",\n      icon: Waves,\n    },\n    {\n      title: \"深層護髮\",\n      description: \"專業護理修護受損髮質，恢復健康光澤\",\n      price: \"NT$ 800 起\",\n      icon: Sparkles,\n    },\n  ];\n\n  const highlights = [\n    {\n      icon: Award,\n      title: \"60年專業經驗\",\n      description: \"設計師團隊累積豐富實戰經驗\",\n    },\n    {\n      icon: Heart,\n      title: \"溫馨如家氛圍\",\n      description: \"舒適環境讓您放鬆享受美髮時光\",\n    },\n    {\n      icon: Users,\n      title: \"專屬客製服務\",\n      description: \"根據個人需求提供最適合的建議\",\n    },\n    {\n      icon: Clock,\n      title: \"彈性預約時段\",\n      description: \"配合您的時間，提供便利服務\",\n    },\n  ];\n\n  const steps = [\n    { icon: Scissors, title: \"選擇服務\", desc: \"瀏覽服務項目，選擇您需要的美髮服務\" },\n    { icon: Heart, title: \"指定設計師\", desc: \"挑選喜愛的設計師，或由我們為您推薦\" },\n    { icon: Star, title: \"確認預約\", desc: \"選擇方便的時間，完成線上預約\" },\n  ];\n\n  return (\n    <div className=\"min-h-screen\">\n      {/* Hero Section */}\n      <section className=\"relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-accent/5 -z-10\"></div>\n        <div className=\"container mx-auto px-4 py-16 md:py-24\">\n          <div className=\"grid lg:grid-cols-2 gap-10 md:gap-16 items-center max-w-7xl mx-auto\">\n            {/* Left: Welcome Content */}\n            <div className=\"text-center lg:text-left space-y-8\">\n              <div className=\"space-y-6\">\n                <div className=\"inline-block\">\n                  <div className=\"flex items-center gap-2 text-sm text-primary font-medium mb-4\">\n                    <Heart className=\"w-4 h-4 fill-primary\" />\n                    <span>用心對待每一位顧客</span>\n                  </div>\n                </div>\n                <h1 className=\"text-5xl md:text-6xl lg:text-7xl font-serif font-bold leading-tight\">\n                  雅曼美髮沙龍\n                </h1>\n                <p className=\"text-2xl md:text-3xl text-muted-foreground font-light leading-relaxed\">\n                  如家般溫馨<br className=\"sm:hidden\"/>的美髮體驗\n                </p>\n                <div className=\"space-y-3 pt-2\">\n                  <div className=\"flex items-start gap-3 text-muted-foreground\">\n                    <CheckCircle2 className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <p className=\"text-lg\">累積60年豐富經驗的專業團隊</p>\n                  </div>\n                  <div className=\"flex items-start gap-3 text-muted-foreground\">\n                    <CheckCircle2 className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <p className=\"text-lg\">舒適明亮的沙龍環境</p>\n                  </div>\n                  <div className=\"flex items-start gap-3 text-muted-foreground\">\n                    <CheckCircle2 className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                    <p className=\"text-lg\">專屬客製化美髮服務</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"flex flex-col sm:flex-row gap-3 items-center lg:items-start justify-center lg:justify-start text-muted-foreground\">\n                  <div className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-4 h-4 text-primary\" />\n                    <span>中和區民德路52號1樓</span>\n                  </div>\n                  <span className=\"hidden sm:inline text-muted-foreground/40\">•</span>\n                  <div className=\"flex items-center gap-2\">\n                    <Phone className=\"w-4 h-4 text-primary\" />\n                    <a href=\"tel:02-89513058\" className=\"hover:text-primary transition-colors\" data-testid=\"link-hero-phone\">02-89513058</a>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row gap-3 justify-center lg:justify-start pt-4\">\n                  <Link href=\"/booking\" data-testid=\"link-hero-booking\">\n                    <Button size=\"lg\" className=\"w-full sm:w-auto shadow-lg hover:shadow-xl transition-shadow\" data-testid=\"button-hero-booking\">\n                      <Sparkles className=\"w-5 h-5 mr-2\" />\n                      立即線上預約\n                    </Button>\n                  </Link>\n                  <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-full sm:w-auto\" data-testid=\"link-hero-line\">\n                    <Button size=\"lg\" variant=\"outline\" className=\"w-full border-2\" data-testid=\"button-hero-line\">\n                      <SiLine className=\"w-5 h-5 mr-2\" />\n                      LINE 諮詢\n                    </Button>\n                  </a>\n                </div>\n              </div>\n            </div>\n\n            {/* Right: Team Photo */}\n            <div className=\"relative lg:order-last order-first\">\n              <div className=\"relative rounded-2xl overflow-hidden shadow-2xl\">\n                <img \n                  src={teamPhoto} \n                  alt=\"雅曼美髮沙龍 - 益安與巧宣設計師在現代化沙龍環境\" \n                  className=\"w-full h-auto object-cover\"\n                />\n              </div>\n              <div className=\"absolute -z-10 -top-6 -right-6 w-full h-full rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20\"></div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Highlights Section */}\n      <section className=\"bg-muted/30 py-16 md:py-20\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-6xl mx-auto\">\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-3xl md:text-4xl font-serif font-bold mb-4\">為什麼選擇雅曼</h2>\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n                我們相信美髮不只是技術，更是一種藝術與關懷的結合\n              </p>\n            </div>\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {highlights.map((item, index) => (\n                <Card key={index} className=\"border-0 shadow-sm hover-elevate\">\n                  <CardContent className=\"p-6 text-center\">\n                    <div className=\"w-16 h-16 mx-auto mb-4 rounded-2xl bg-primary/10 flex items-center justify-center\">\n                      <item.icon className=\"w-8 h-8 text-primary\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold mb-2\">{item.title}</h3>\n                    <p className=\"text-muted-foreground text-sm leading-relaxed\">{item.description}</p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Services Section */}\n      <section className=\"container mx-auto px-4 py-16 md:py-20\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-serif font-bold mb-4\">專業服務項目</h2>\n            <p className=\"text-lg text-muted-foreground\">從基礎護理到時尚造型，滿足您的所有美髮需求</p>\n          </div>\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {services.map((service, index) => (\n              <Card key={index} className=\"hover-elevate group\">\n                <CardContent className=\"p-6\">\n                  <div className=\"w-14 h-14 mb-4 rounded-xl bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center group-hover:scale-110 transition-transform\">\n                    <service.icon className=\"w-7 h-7 text-primary\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold mb-2\">{service.title}</h3>\n                  <p className=\"text-muted-foreground text-sm mb-4 leading-relaxed\">{service.description}</p>\n                  <p className=\"text-primary font-semibold text-lg\">{service.price}</p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n          <div className=\"text-center mt-10\">\n            <Link href=\"/services\" data-testid=\"link-view-services\">\n              <Button size=\"lg\" variant=\"outline\" data-testid=\"button-view-all-services\">\n                查看完整服務項目\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* Booking Process Section */}\n      <section className=\"bg-gradient-to-br from-primary/5 to-accent/5 py-16 md:py-20\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"max-w-5xl mx-auto\">\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-3xl md:text-4xl font-serif font-bold mb-4\">輕鬆線上預約</h2>\n              <p className=\"text-lg text-muted-foreground\">簡單三步驟，為您預留專屬美髮時光</p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-3 gap-8 mb-12\">\n              {steps.map((step, index) => (\n                <div key={index} className=\"relative\">\n                  {index < steps.length - 1 && (\n                    <div className=\"hidden md:block absolute top-8 left-1/2 w-full h-0.5 bg-primary/20 -z-10\"></div>\n                  )}\n                  <div className=\"bg-background rounded-2xl p-6 shadow-sm text-center hover-elevate\">\n                    <div className=\"relative inline-flex mb-4\">\n                      <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\n                        <step.icon className=\"w-8 h-8 text-primary\" />\n                      </div>\n                      <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-xs font-bold\">\n                        {index + 1}\n                      </div>\n                    </div>\n                    <h3 className=\"text-xl font-semibold mb-2\">{step.title}</h3>\n                    <p className=\"text-muted-foreground text-sm leading-relaxed\">{step.desc}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"text-center\">\n              <Link href=\"/booking\" data-testid=\"link-booking-flow\">\n                <Button size=\"lg\" className=\"shadow-lg hover:shadow-xl transition-shadow\" data-testid=\"button-start-booking\">\n                  <Sparkles className=\"w-5 h-5 mr-2\" />\n                  開始預約您的美髮時光\n                </Button>\n              </Link>\n              <p className=\"text-sm text-muted-foreground mt-4\">預約後我們會盡快與您確認</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Section */}\n      <section className=\"container mx-auto px-4 py-16 md:py-20\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-serif font-bold mb-4\">聯絡我們</h2>\n            <p className=\"text-lg text-muted-foreground\">歡迎隨時與我們聯繫，我們樂意為您服務</p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 gap-6\">\n            <Card className=\"hover-elevate border-2\">\n              <CardContent className=\"p-8\">\n                <div className=\"flex items-start gap-4 mb-6\">\n                  <div className=\"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <MapPin className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-lg mb-2\">沙龍地址</h3>\n                    <p className=\"text-muted-foreground leading-relaxed\">\n                      新北市中和區民德路52號1樓\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <Phone className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-lg mb-2\">聯絡電話</h3>\n                    <a href=\"tel:02-89513058\" className=\"text-muted-foreground hover:text-primary transition-colors text-lg\" data-testid=\"link-contact-phone\">\n                      02-89513058\n                    </a>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className=\"hover-elevate border-2 bg-gradient-to-br from-primary/5 to-accent/5\">\n              <CardContent className=\"p-8\">\n                <div className=\"flex items-start gap-4 mb-6\">\n                  <div className=\"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center flex-shrink-0\">\n                    <SiLine className=\"w-6 h-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-lg mb-2\">LINE 官方帳號</h3>\n                    <p className=\"text-muted-foreground\">@377bechg</p>\n                  </div>\n                </div>\n                \n                <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"block\" data-testid=\"link-contact-line\">\n                  <Button size=\"lg\" className=\"w-full shadow-md hover:shadow-lg transition-shadow\" data-testid=\"button-line-contact\">\n                    <SiLine className=\"w-5 h-5 mr-2\" />\n                    立即透過 LINE 諮詢\n                  </Button>\n                </a>\n                <p className=\"text-sm text-muted-foreground text-center mt-3\">\n                  快速回覆，為您解答所有美髮問題\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"mt-8 text-center\">\n            <Link href=\"/contact\" data-testid=\"link-contact-page\">\n              <Button variant=\"outline\" size=\"lg\" data-testid=\"button-view-contact-info\">\n                查看完整聯絡資訊\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n","size_bytes":15413},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const customers = pgTable(\"customers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  phone: text(\"phone\").notNull(),\n  lineId: text(\"line_id\"),\n  lineUserId: text(\"line_user_id\"),\n  email: text(\"email\"),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const services = pgTable(\"services\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  price: integer(\"price\").notNull(),\n  priceNote: text(\"price_note\"),\n  duration: integer(\"duration\").default(60).notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const staff = pgTable(\"staff\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  role: text(\"role\").notNull(),\n  email: text(\"email\"),\n  phone: text(\"phone\"),\n  specialty: text(\"specialty\"),\n  yearsOfExperience: integer(\"years_of_experience\"),\n  photoUrl: text(\"photo_url\"),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const bookings = pgTable(\"bookings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  customerId: varchar(\"customer_id\").references(() => customers.id),\n  customerName: text(\"customer_name\").notNull(),\n  customerPhone: text(\"customer_phone\").notNull(),\n  customerEmail: text(\"customer_email\"),\n  customerLineId: text(\"customer_line_id\"),\n  customerLineUserId: text(\"customer_line_user_id\"),\n  serviceIds: text(\"service_ids\").array().notNull(),\n  serviceNames: text(\"service_names\").notNull(),\n  totalDuration: integer(\"total_duration\").notNull(),\n  stylistId: varchar(\"stylist_id\").references(() => staff.id),\n  stylistName: text(\"stylist_name\").notNull(),\n  assistantId: varchar(\"assistant_id\").references(() => staff.id),\n  assistantName: text(\"assistant_name\"),\n  bookingDate: text(\"booking_date\").notNull(),\n  bookingTime: text(\"booking_time\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const purchaseRecords = pgTable(\"purchase_records\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  customerId: varchar(\"customer_id\").references(() => customers.id).notNull(),\n  serviceId: varchar(\"service_id\").references(() => services.id),\n  serviceName: text(\"service_name\").notNull(),\n  amount: integer(\"amount\").notNull(),\n  stylistName: text(\"stylist_name\"),\n  notes: text(\"notes\"),\n  purchaseDate: timestamp(\"purchase_date\").defaultNow().notNull(),\n});\n\nexport const marketingCampaigns = pgTable(\"marketing_campaigns\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  discountType: text(\"discount_type\"),\n  discountValue: text(\"discount_value\"),\n  startDate: text(\"start_date\"),\n  endDate: text(\"end_date\"),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const seoSettings = pgTable(\"seo_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  page: text(\"page\").notNull().unique(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  keywords: text(\"keywords\"),\n  ogImage: text(\"og_image\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true });\nexport const insertCustomerSchema = createInsertSchema(customers).omit({ id: true, createdAt: true });\nexport const insertServiceSchema = createInsertSchema(services).omit({ id: true, createdAt: true });\nexport const insertStaffSchema = createInsertSchema(staff).omit({ id: true, createdAt: true });\nexport const insertBookingSchema = createInsertSchema(bookings).omit({ id: true, createdAt: true });\nexport const insertPurchaseRecordSchema = createInsertSchema(purchaseRecords).omit({ id: true, purchaseDate: true });\nexport const insertMarketingCampaignSchema = createInsertSchema(marketingCampaigns).omit({ id: true, createdAt: true });\nexport const insertSeoSettingSchema = createInsertSchema(seoSettings).omit({ id: true, updatedAt: true });\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertCustomer = z.infer<typeof insertCustomerSchema>;\nexport type Customer = typeof customers.$inferSelect;\nexport type InsertService = z.infer<typeof insertServiceSchema>;\nexport type Service = typeof services.$inferSelect;\nexport type InsertStaff = z.infer<typeof insertStaffSchema>;\nexport type Staff = typeof staff.$inferSelect;\nexport type InsertBooking = z.infer<typeof insertBookingSchema>;\nexport type Booking = typeof bookings.$inferSelect;\nexport type InsertPurchaseRecord = z.infer<typeof insertPurchaseRecordSchema>;\nexport type PurchaseRecord = typeof purchaseRecords.$inferSelect;\nexport type InsertMarketingCampaign = z.infer<typeof insertMarketingCampaignSchema>;\nexport type MarketingCampaign = typeof marketingCampaigns.$inferSelect;\nexport type InsertSeoSetting = z.infer<typeof insertSeoSettingSchema>;\nexport type SeoSetting = typeof seoSettings.$inferSelect;\n","size_bytes":5848},"client/src/components/examples/StylistCard.tsx":{"content":"import StylistCard from '../StylistCard';\nimport stylistImage from '@assets/generated_images/Female_stylist_portrait_c9075e53.png';\n\nexport default function StylistCardExample() {\n  return (\n    <div className=\"p-8 max-w-sm\">\n      <StylistCard \n        name=\"林美華\"\n        specialty=\"染燙專家\"\n        experience=\"8年專業經驗\"\n        image={stylistImage}\n      />\n    </div>\n  );\n}\n","size_bytes":398},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/examples/Navbar.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport Navbar from '../Navbar';\n\nexport default function NavbarExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Navbar />\n    </QueryClientProvider>\n  );\n}\n","size_bytes":294},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/Footer.tsx":{"content":"import { MapPin, Phone, Clock } from \"lucide-react\";\nimport { SiLine } from \"react-icons/si\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-card border-t mt-20\">\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"grid md:grid-cols-3 gap-8\">\n          <div>\n            <h3 className=\"text-2xl font-serif font-bold text-primary mb-4\">雅曼美髮沙龍</h3>\n            <p className=\"text-muted-foreground text-sm leading-relaxed\">\n              如家人般溫馨的服務，讓您在輕鬆自在的氛圍中享受專業美髮體驗\n            </p>\n          </div>\n\n          <div>\n            <h4 className=\"font-semibold mb-4\">聯絡資訊</h4>\n            <div className=\"space-y-3 text-sm\">\n              <div className=\"flex items-start gap-2\">\n                <MapPin className=\"w-4 h-4 mt-0.5 text-primary flex-shrink-0\" />\n                <span className=\"text-muted-foreground\">中和區民德路52號1樓</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Phone className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                <a href=\"tel:02-89513058\" className=\"text-muted-foreground hover:text-primary transition-colors\">\n                  02-89513058\n                </a>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <SiLine className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-muted-foreground hover:text-primary transition-colors\">\n                  @377bechg\n                </a>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <h4 className=\"font-semibold mb-4\">營業時間</h4>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex items-start gap-2\">\n                <Clock className=\"w-4 h-4 mt-0.5 text-primary flex-shrink-0\" />\n                <div className=\"text-muted-foreground\">\n                  <p>週一至週六：10:00 - 20:00</p>\n                  <p>週日：10:00 - 18:00</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"border-t mt-8 pt-8 text-center text-sm text-muted-foreground\">\n          <p>© 2024 雅曼美髮沙龍 版權所有</p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":2437},"client/src/components/examples/Services.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport Services from '../../pages/Services';\n\nexport default function ServicesExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Services />\n    </QueryClientProvider>\n  );\n}\n","size_bytes":311},"client/src/components/examples/Team.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport Team from '../../pages/Team';\n\nexport default function TeamExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Team />\n    </QueryClientProvider>\n  );\n}\n","size_bytes":295},"client/src/pages/AdminServices.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertServiceSchema, type Service, type InsertService } from \"@shared/schema\";\nimport { Plus, Edit, Trash2 } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport default function AdminServices() {\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingService, setEditingService] = useState<Service | null>(null);\n\n  const { data: services = [], isLoading } = useQuery<Service[]>({\n    queryKey: [\"/api/services\"],\n  });\n\n  const form = useForm<InsertService>({\n    resolver: zodResolver(insertServiceSchema),\n    defaultValues: {\n      name: \"\",\n      description: \"\",\n      price: 0,\n      priceNote: null,\n      isActive: true,\n    },\n  });\n\n  const createServiceMutation = useMutation({\n    mutationFn: async (data: InsertService) => {\n      const response = await fetch(\"/api/services\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to create service\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/services\"] });\n      toast({ title: \"服務項目已新增\" });\n      handleCloseDialog();\n    },\n  });\n\n  const updateServiceMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<InsertService> }) => {\n      const response = await fetch(`/api/services/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to update service\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/services\"] });\n      toast({ title: \"服務項目已更新\" });\n      handleCloseDialog();\n    },\n  });\n\n  const deleteServiceMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await fetch(`/api/services/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete service\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/services\"] });\n      toast({ title: \"服務項目已刪除\" });\n    },\n  });\n\n  const handleCreateNew = () => {\n    setEditingService(null);\n    form.reset({\n      name: \"\",\n      description: \"\",\n      price: 0,\n      priceNote: null,\n      isActive: true,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleEdit = (service: Service) => {\n    setEditingService(service);\n    form.reset({\n      name: service.name,\n      description: service.description,\n      price: service.price,\n      priceNote: service.priceNote,\n      isActive: service.isActive,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm(\"確定要刪除此服務項目嗎？\")) {\n      deleteServiceMutation.mutate(id);\n    }\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setEditingService(null);\n    form.reset();\n  };\n\n  const handleSubmit = (data: InsertService) => {\n    if (editingService) {\n      updateServiceMutation.mutate({ id: editingService.id, data });\n    } else {\n      createServiceMutation.mutate(data);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-serif\">服務項目管理</h1>\n          <Button onClick={handleCreateNew} data-testid=\"button-add-service\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            新增服務項目\n          </Button>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>服務項目列表 ({services.length})</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n            ) : services.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">尚無服務項目</div>\n            ) : (\n              <div className=\"divide-y\">\n                {services.map((service) => (\n                  <div\n                    key={service.id}\n                    className=\"flex items-center justify-between py-4\"\n                    data-testid={`service-${service.id}`}\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"font-medium text-lg\" data-testid={`text-service-name-${service.id}`}>\n                          {service.name}\n                        </span>\n                        {service.isActive ? (\n                          <Badge variant=\"default\">啟用中</Badge>\n                        ) : (\n                          <Badge variant=\"secondary\">已停用</Badge>\n                        )}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\" data-testid={`text-service-description-${service.id}`}>\n                        {service.description}\n                      </div>\n                      <div className=\"text-sm font-medium mt-1\" data-testid={`text-service-price-${service.id}`}>\n                        NT$ {service.price}{service.priceNote ? ` (${service.priceNote})` : \"\"}\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleEdit(service)}\n                        data-testid={`button-edit-${service.id}`}\n                      >\n                        <Edit className=\"h-4 w-4 mr-1\" />\n                        編輯\n                      </Button>\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        onClick={() => handleDelete(service.id)}\n                        data-testid={`button-delete-${service.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Dialog open={isDialogOpen} onOpenChange={handleCloseDialog}>\n          <DialogContent data-testid=\"dialog-service-form\">\n            <DialogHeader>\n              <DialogTitle>{editingService ? \"編輯服務項目\" : \"新增服務項目\"}</DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>服務名稱 *</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-service-name\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"description\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>服務說明 *</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} data-testid=\"input-service-description\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"price\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>價格 *</FormLabel>\n                        <FormControl>\n                          <Input\n                            {...field}\n                            type=\"number\"\n                            onChange={(e) => field.onChange(parseInt(e.target.value))}\n                            data-testid=\"input-service-price\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"priceNote\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>價格備註</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} placeholder=\"例如: 起\" data-testid=\"input-service-price-note\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"isActive\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex items-center justify-between rounded-lg border p-4\">\n                      <div>\n                        <FormLabel>服務狀態</FormLabel>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {field.value ? \"此服務項目將在前台顯示\" : \"此服務項目將被隱藏\"}\n                        </div>\n                      </div>\n                      <FormControl>\n                        <Switch\n                          checked={field.value}\n                          onCheckedChange={field.onChange}\n                          data-testid=\"switch-service-active\"\n                        />\n                      </FormControl>\n                    </FormItem>\n                  )}\n                />\n\n                <DialogFooter>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={handleCloseDialog}\n                    data-testid=\"button-cancel\"\n                  >\n                    取消\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createServiceMutation.isPending || updateServiceMutation.isPending}\n                    data-testid=\"button-submit\"\n                  >\n                    {createServiceMutation.isPending || updateServiceMutation.isPending\n                      ? \"儲存中...\"\n                      : editingService\n                      ? \"更新服務\"\n                      : \"新增服務\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","size_bytes":11952},"client/src/pages/Services.tsx":{"content":"import ServiceCard from \"@/components/ServiceCard\";\nimport { Scissors, Palette, Waves, Sparkles, Droplets } from \"lucide-react\";\nimport washingImage from '@assets/stock_images/clean_professional_h_d5fc4d99.jpg';\nimport cuttingImage from '@assets/stock_images/professional_hairdre_9015c124.jpg';\nimport coloringImage from '@assets/stock_images/professional_hair_co_3a1117ee.jpg';\nimport permingImage from '@assets/stock_images/hair_perm_curling_se_31f1e998.jpg';\nimport treatmentImage from '@assets/generated_images/Professional_hair_treatment_service_d3367325.png';\n\nexport default function Services() {\n  const services = [\n    {\n      title: \"洗髮\",\n      description: \"舒適的洗髮體驗，使用優質洗髮產品，為您的秀髮提供基礎清潔與保養。\",\n      price: \"NT$ 250\",\n      image: washingImage,\n      icon: Droplets,\n    },\n    {\n      title: \"專業剪髮\",\n      description: \"根據您的臉型、氣質與生活方式，設計專屬於您的完美髮型。我們的設計師會細心傾聽您的需求，提供專業建議。\",\n      price: \"NT$ 400\",\n      image: cuttingImage,\n      icon: Scissors,\n    },\n    {\n      title: \"時尚染髮\",\n      description: \"使用頂級染劑，為您呈現完美髮色。從自然色系到時尚潮流色，都能展現您的獨特魅力。\",\n      price: \"NT$ 2,000 起\",\n      image: coloringImage,\n      icon: Palette,\n    },\n    {\n      title: \"質感燙髮\",\n      description: \"打造自然捲度與蓬鬆感，讓頭髮充滿生命力。使用溫和藥水，降低對髮質的傷害。\",\n      price: \"NT$ 2,000 起\",\n      image: permingImage,\n      icon: Waves,\n    },\n    {\n      title: \"深層護髮\",\n      description: \"針對受損髮質提供深層修護，補充養分與水分，讓秀髮恢復健康光澤。\",\n      price: \"NT$ 800 起\",\n      image: treatmentImage,\n      icon: Sparkles,\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-5xl font-serif font-bold mb-4\">服務項目</h1>\n          <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n            從基礎護理到時尚造型，我們提供全方位的專業美髮服務\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto\">\n          {services.map((service, index) => (\n            <ServiceCard key={index} {...service} />\n          ))}\n        </div>\n\n        <div className=\"mt-16 p-8 bg-card rounded-2xl max-w-4xl mx-auto\">\n          <h2 className=\"text-2xl font-serif font-semibold mb-4 text-center\">服務說明</h2>\n          <div className=\"space-y-4 text-muted-foreground\">\n            <p>• 以上價格為基本價格，實際費用依照髮長、髮質及服務內容而定</p>\n            <p>• 首次來店享有9折優惠</p>\n            <p>• 建議提前預約，確保您的專屬時段</p>\n            <p>• 所有服務均包含專業諮詢與造型建議</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3116},"client/src/pages/Booking.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Scissors, Palette, Waves, Sparkles, ChevronRight, ChevronLeft, Check, User, Clock, AlertCircle, Award } from \"lucide-react\";\nimport stylist1Img from \"@assets/stock_images/professional_hairsty_d98dcaa5.jpg\";\nimport stylist2Img from \"@assets/stock_images/professional_hairsty_278c32f0.jpg\";\nimport stylist3Img from \"@assets/stock_images/professional_hairsty_0ae1c4d9.jpg\";\nimport stylist4Img from \"@assets/stock_images/professional_hairsty_ee8ddbc3.jpg\";\nimport stylist5Img from \"@assets/stock_images/professional_hairsty_49afd82e.jpg\";\nimport stylist6Img from \"@assets/stock_images/professional_hairsty_1ed5778f.jpg\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport type { Service, Staff } from \"@shared/schema\";\n\nconst getServiceIcon = (serviceName: string) => {\n  if (serviceName.includes(\"洗\")) return Sparkles;\n  if (serviceName.includes(\"剪\")) return Scissors;\n  if (serviceName.includes(\"染\")) return Palette;\n  if (serviceName.includes(\"燙\")) return Waves;\n  return Sparkles;\n};\n\nexport default function Booking() {\n  const [step, setStep] = useState(1);\n  const [selectedServices, setSelectedServices] = useState<string[]>([]);\n  const [selectedStylist, setSelectedStylist] = useState(\"\");\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(new Date());\n  const [selectedTime, setSelectedTime] = useState(\"\");\n  const [customerName, setCustomerName] = useState(\"\");\n  const [customerPhone, setCustomerPhone] = useState(\"\");\n  const [customerEmail, setCustomerEmail] = useState(\"\");\n  const [customerLine, setCustomerLine] = useState(\"\");\n  const { toast } = useToast();\n\n  const { data: services = [], isLoading: servicesLoading } = useQuery<Service[]>({\n    queryKey: [\"/api/services/active\"],\n  });\n\n  const { data: allStaff = [], isLoading: staffLoading } = useQuery<Staff[]>({\n    queryKey: [\"/api/staff/role/設計師\"],\n  });\n\n  const defaultPhotos = [stylist1Img, stylist2Img, stylist3Img, stylist4Img, stylist5Img, stylist6Img];\n  \n  const stylists = [\n    { id: \"none\", name: \"無指定\", specialty: \"由店家安排專業設計師\", photoUrl: null },\n    ...allStaff.filter(s => s.isActive).map((s, index) => ({\n      id: s.id,\n      name: s.name,\n      specialty: s.specialty ? `${s.specialty}${s.yearsOfExperience ? `・${s.yearsOfExperience}年經驗` : ''}` : '',\n      photoUrl: s.photoUrl || defaultPhotos[index % defaultPhotos.length],\n    })),\n  ];\n\n  const timeSlots = [\n    \"10:00\", \"10:30\", \"11:00\", \"11:30\", \"12:00\", \"12:30\",\n    \"13:00\", \"13:30\", \"14:00\", \"14:30\", \"15:00\", \"15:30\",\n    \"16:00\", \"16:30\", \"17:00\", \"17:30\", \"18:00\", \"18:30\",\n  ];\n\n  const toggleService = (serviceId: string) => {\n    setSelectedServices(prev => \n      prev.includes(serviceId) \n        ? prev.filter(id => id !== serviceId)\n        : [...prev, serviceId]\n    );\n  };\n\n  const getTotalDuration = () => {\n    return selectedServices.reduce((total, serviceId) => {\n      const service = services.find(s => s.id === serviceId);\n      return total + (service?.duration || 0);\n    }, 0);\n  };\n\n  const formatDuration = (minutes: number) => {\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    if (hours > 0 && mins > 0) return `${hours}小時${mins}分鐘`;\n    if (hours > 0) return `${hours}小時`;\n    return `${mins}分鐘`;\n  };\n\n  const handleNext = () => {\n    if (step === 1 && selectedServices.length === 0) {\n      toast({ title: \"請選擇至少一項服務\", variant: \"destructive\" });\n      return;\n    }\n    if (step === 2 && !selectedStylist) {\n      toast({ title: \"請選擇設計師\", variant: \"destructive\" });\n      return;\n    }\n    if (step === 3 && !selectedTime) {\n      toast({ title: \"請選擇預約時間\", variant: \"destructive\" });\n      return;\n    }\n    if (step === 4) {\n      if (!customerName || !customerPhone) {\n        toast({ title: \"請填寫完整資料\", variant: \"destructive\" });\n        return;\n      }\n      handleSubmit();\n      return;\n    }\n    setStep(step + 1);\n  };\n\n  const createBookingMutation = useMutation({\n    mutationFn: async () => {\n      const selectedServiceObjects = services.filter(s => selectedServices.includes(s.id));\n      const serviceNames = selectedServiceObjects.map(s => s.name).join(\"、\");\n      const stylist = stylists.find(s => s.id === selectedStylist);\n      const totalDuration = getTotalDuration();\n      \n      const response = await fetch(\"/api/bookings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          customerId: null,\n          customerName,\n          customerPhone,\n          customerEmail: customerEmail || null,\n          customerLineId: customerLine || null,\n          customerLineUserId: null,\n          serviceIds: selectedServices,\n          serviceNames,\n          totalDuration,\n          stylistId: selectedStylist === \"none\" ? null : selectedStylist,\n          stylistName: stylist?.name || \"\",\n          assistantId: null,\n          assistantName: null,\n          bookingDate: selectedDate?.toISOString().split('T')[0] || \"\",\n          bookingTime: selectedTime,\n          status: \"pending\",\n          notes: null,\n        }),\n      });\n      \n      if (!response.ok) throw new Error(\"Failed to create booking\");\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"預約成功！\", description: \"我們已收到您的預約，管理員將盡快確認。\" });\n      setStep(5);\n    },\n    onError: () => {\n      toast({ title: \"預約失敗\", description: \"請稍後再試或聯繫我們。\", variant: \"destructive\" });\n    },\n  });\n\n  const handleSubmit = () => {\n    createBookingMutation.mutate();\n  };\n\n  const resetForm = () => {\n    setStep(1);\n    setSelectedServices([]);\n    setSelectedStylist(\"\");\n    setSelectedDate(new Date());\n    setSelectedTime(\"\");\n    setCustomerName(\"\");\n    setCustomerPhone(\"\");\n    setCustomerEmail(\"\");\n    setCustomerLine(\"\");\n  };\n\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"container mx-auto px-4 max-w-4xl\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-5xl font-serif font-bold mb-4\">線上預約</h1>\n          <p className=\"text-lg text-muted-foreground\">輕鬆完成預約，享受專屬美髮時光</p>\n        </div>\n\n        {step < 5 && (\n          <div className=\"flex justify-center mb-8\">\n            <div className=\"flex items-center gap-2\">\n              {[1, 2, 3, 4].map((s) => (\n                <div key={s} className=\"flex items-center\">\n                  <div\n                    className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${\n                      s <= step ? \"bg-primary text-primary-foreground\" : \"bg-muted text-muted-foreground\"\n                    }`}\n                  >\n                    {s}\n                  </div>\n                  {s < 4 && <div className={`w-12 h-1 ${s < step ? \"bg-primary\" : \"bg-muted\"}`} />}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-2xl\">\n              {step === 1 && \"選擇服務項目\"}\n              {step === 2 && \"選擇設計師\"}\n              {step === 3 && \"選擇日期與時間\"}\n              {step === 4 && \"填寫聯絡資訊\"}\n              {step === 5 && \"預約完成\"}\n            </CardTitle>\n            <CardDescription>\n              {step === 1 && \"請選擇您需要的美髮服務\"}\n              {step === 2 && \"選擇您喜歡的設計師，或由我們為您安排\"}\n              {step === 3 && \"選擇方便的預約時間\"}\n              {step === 4 && \"填寫您的聯絡方式\"}\n              {step === 5 && \"我們已收到您的預約\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {step === 1 && (\n              <div className=\"space-y-4\">\n                {servicesLoading ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n                ) : services.length === 0 ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">暫無可用服務</div>\n                ) : (\n                  <>\n                    <Alert>\n                      <AlertCircle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        可複選多項服務，系統會自動計算所需時間\n                      </AlertDescription>\n                    </Alert>\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      {services.map((service) => {\n                        const Icon = getServiceIcon(service.name);\n                        const priceDisplay = service.priceNote \n                          ? `NT$ ${service.price.toLocaleString()} ${service.priceNote}`\n                          : `NT$ ${service.price.toLocaleString()}`;\n                        const isSelected = selectedServices.includes(service.id);\n                        \n                        return (\n                          <Label\n                            key={service.id}\n                            htmlFor={service.id}\n                            className={`flex items-center gap-4 p-4 border rounded-xl cursor-pointer hover-elevate ${\n                              isSelected ? \"border-primary bg-primary/5\" : \"\"\n                            }`}\n                          >\n                            <Checkbox \n                              id={service.id} \n                              checked={isSelected}\n                              onCheckedChange={() => toggleService(service.id)}\n                              data-testid={`checkbox-service-${service.id}`} \n                            />\n                            <Icon className=\"w-8 h-8 text-primary flex-shrink-0\" />\n                            <div className=\"flex-1\">\n                              <div className=\"font-semibold\">{service.name}</div>\n                              <div className=\"text-sm text-muted-foreground\">{priceDisplay}</div>\n                              <div className=\"text-xs text-muted-foreground flex items-center gap-1 mt-1\">\n                                <Clock className=\"w-3 h-3\" />\n                                約 {service.duration} 分鐘\n                              </div>\n                            </div>\n                          </Label>\n                        );\n                      })}\n                    </div>\n                    {selectedServices.length > 0 && (\n                      <div className=\"p-4 bg-primary/10 rounded-xl\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"font-semibold\">預估總時間：</span>\n                          <span className=\"text-lg font-bold text-primary\">{formatDuration(getTotalDuration())}</span>\n                        </div>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            )}\n\n            {step === 2 && (\n              <RadioGroup value={selectedStylist} onValueChange={setSelectedStylist}>\n                {staffLoading ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n                ) : (\n                  <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                    {stylists.map((stylist) => (\n                      <Label\n                        key={stylist.id}\n                        htmlFor={stylist.id}\n                        className={`relative flex flex-col items-center p-6 border-2 rounded-2xl cursor-pointer transition-all hover-elevate ${\n                          selectedStylist === stylist.id \n                            ? \"border-primary bg-primary/5 shadow-lg\" \n                            : \"border-border\"\n                        }`}\n                      >\n                        <RadioGroupItem \n                          value={stylist.id} \n                          id={stylist.id} \n                          className=\"absolute top-4 right-4\" \n                          data-testid={`radio-stylist-${stylist.id}`} \n                        />\n                        \n                        <div className=\"relative mb-4\">\n                          {stylist.photoUrl ? (\n                            <div className=\"relative\">\n                              <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-background/80 rounded-2xl\" />\n                              <img \n                                src={stylist.photoUrl} \n                                alt={stylist.name} \n                                className=\"w-32 h-32 rounded-2xl object-cover shadow-md\"\n                              />\n                            </div>\n                          ) : (\n                            <div className=\"w-32 h-32 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center shadow-md\">\n                              <User className=\"w-16 h-16 text-primary/60\" />\n                            </div>\n                          )}\n                          {selectedStylist === stylist.id && (\n                            <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-primary rounded-full flex items-center justify-center shadow-lg\">\n                              <Check className=\"w-5 h-5 text-primary-foreground\" />\n                            </div>\n                          )}\n                        </div>\n                        \n                        <div className=\"text-center space-y-1\">\n                          <div className=\"font-bold text-lg\">{stylist.name}</div>\n                          {stylist.specialty && (\n                            <div className=\"text-sm text-muted-foreground flex items-center justify-center gap-1\">\n                              <Award className=\"w-3 h-3\" />\n                              {stylist.specialty}\n                            </div>\n                          )}\n                        </div>\n                      </Label>\n                    ))}\n                  </div>\n                )}\n              </RadioGroup>\n            )}\n\n            {step === 3 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <Label className=\"mb-2 block\">選擇日期</Label>\n                  <Calendar\n                    mode=\"single\"\n                    selected={selectedDate}\n                    onSelect={setSelectedDate}\n                    className=\"rounded-xl border mx-auto\"\n                    disabled={(date) => date < new Date() || date.getDay() === 0}\n                  />\n                </div>\n                <div>\n                  <Label className=\"mb-2 block\">選擇時間</Label>\n                  <div className=\"grid grid-cols-4 md:grid-cols-6 gap-2\">\n                    {timeSlots.map((time) => (\n                      <Button\n                        key={time}\n                        variant={selectedTime === time ? \"default\" : \"outline\"}\n                        size=\"sm\"\n                        onClick={() => setSelectedTime(time)}\n                        data-testid={`button-time-${time}`}\n                      >\n                        {time}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {step === 4 && (\n              <div className=\"space-y-4\">\n                <Alert>\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    預約需要管理員確認後才會生效，我們將透過電話、Email或LINE通知您\n                  </AlertDescription>\n                </Alert>\n                <div>\n                  <Label htmlFor=\"name\">姓名 *</Label>\n                  <Input\n                    id=\"name\"\n                    value={customerName}\n                    onChange={(e) => setCustomerName(e.target.value)}\n                    placeholder=\"請輸入您的姓名\"\n                    data-testid=\"input-name\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"phone\">電話 *</Label>\n                  <Input\n                    id=\"phone\"\n                    value={customerPhone}\n                    onChange={(e) => setCustomerPhone(e.target.value)}\n                    placeholder=\"請輸入您的聯絡電話\"\n                    data-testid=\"input-phone\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"email\">Email (選填)</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={customerEmail}\n                    onChange={(e) => setCustomerEmail(e.target.value)}\n                    placeholder=\"接收預約確認信\"\n                    data-testid=\"input-email\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"line\">LINE ID (選填)</Label>\n                  <Input\n                    id=\"line\"\n                    value={customerLine}\n                    onChange={(e) => setCustomerLine(e.target.value)}\n                    placeholder=\"方便我們透過LINE與您聯繫\"\n                    data-testid=\"input-line\"\n                  />\n                </div>\n              </div>\n            )}\n\n            {step === 5 && (\n              <div className=\"text-center py-8\">\n                <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Check className=\"w-10 h-10 text-primary\" />\n                </div>\n                <h3 className=\"text-2xl font-semibold mb-2\">預約已送出！</h3>\n                <p className=\"text-muted-foreground mb-6\">\n                  我們已收到您的預約，管理員確認後將透過電話、Email或LINE通知您\n                </p>\n                <div className=\"bg-card p-6 rounded-xl max-w-md mx-auto text-left space-y-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">服務項目：</span>\n                    <span className=\"font-medium\">\n                      {selectedServices.map(id => services.find(s => s.id === id)?.name).join(\"、\")}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">預估時間：</span>\n                    <span className=\"font-medium\">{formatDuration(getTotalDuration())}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">設計師：</span>\n                    <span className=\"font-medium\">\n                      {stylists.find((s) => s.id === selectedStylist)?.name}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">日期：</span>\n                    <span className=\"font-medium\">{selectedDate?.toLocaleDateString(\"zh-TW\")}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">時間：</span>\n                    <span className=\"font-medium\">{selectedTime}</span>\n                  </div>\n                </div>\n                <Button onClick={resetForm} className=\"mt-6\" data-testid=\"button-new-booking\">\n                  預約其他服務\n                </Button>\n              </div>\n            )}\n\n            {step < 5 && (\n              <div className=\"flex justify-between mt-8\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setStep(step - 1)}\n                  disabled={step === 1}\n                  data-testid=\"button-prev\"\n                >\n                  <ChevronLeft className=\"w-4 h-4 mr-2\" />\n                  上一步\n                </Button>\n                <Button \n                  onClick={handleNext} \n                  disabled={step === 4 && createBookingMutation.isPending}\n                  data-testid=\"button-next\"\n                >\n                  {step === 4 ? (createBookingMutation.isPending ? \"預約中...\" : \"確認預約\") : \"下一步\"}\n                  <ChevronRight className=\"w-4 h-4 ml-2\" />\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":21293},"client/src/pages/AdminSEO.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertSeoSettingSchema, type SeoSetting, type InsertSeoSetting } from \"@shared/schema\";\nimport { Search, Edit } from \"lucide-react\";\n\nconst PAGE_OPTIONS = [\n  { value: \"home\", label: \"首頁\" },\n  { value: \"services\", label: \"服務項目\" },\n  { value: \"team\", label: \"設計師團隊\" },\n  { value: \"booking\", label: \"線上預約\" },\n  { value: \"contact\", label: \"聯絡我們\" },\n];\n\nexport default function AdminSEO() {\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [selectedPage, setSelectedPage] = useState<string>(\"\");\n\n  const { data: seoSettings = [], isLoading } = useQuery<SeoSetting[]>({\n    queryKey: [\"/api/seo-settings\"],\n  });\n\n  const form = useForm<InsertSeoSetting>({\n    resolver: zodResolver(insertSeoSettingSchema),\n    defaultValues: {\n      page: \"\",\n      title: \"\",\n      description: \"\",\n      keywords: null,\n      ogImage: null,\n    },\n  });\n\n  const saveSeoSettingMutation = useMutation({\n    mutationFn: async (data: InsertSeoSetting) => {\n      const response = await fetch(\"/api/seo-settings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to save SEO setting\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/seo-settings\"] });\n      toast({ title: \"SEO 設定已儲存\" });\n      handleCloseDialog();\n    },\n  });\n\n  const handleEditPage = (page: string) => {\n    const existing = seoSettings.find((s) => s.page === page);\n    setSelectedPage(page);\n    \n    if (existing) {\n      form.reset({\n        page: existing.page,\n        title: existing.title,\n        description: existing.description,\n        keywords: existing.keywords,\n        ogImage: existing.ogImage,\n      });\n    } else {\n      const pageOption = PAGE_OPTIONS.find((p) => p.value === page);\n      form.reset({\n        page,\n        title: `雅曼美髮沙龍 - ${pageOption?.label || \"\"}`,\n        description: \"\",\n        keywords: null,\n        ogImage: null,\n      });\n    }\n    \n    setIsDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setSelectedPage(\"\");\n    form.reset();\n  };\n\n  const handleSubmit = (data: InsertSeoSetting) => {\n    saveSeoSettingMutation.mutate(data);\n  };\n\n  const getPageSetting = (page: string) => {\n    return seoSettings.find((s) => s.page === page);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-serif\">SEO 設定</h1>\n        </div>\n\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Search className=\"h-5 w-5\" />\n              搜尋引擎最佳化設定\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"text-sm text-muted-foreground\">\n            設定每個頁面的標題、描述和關鍵字，以提升網站在搜尋引擎的排名。\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>頁面 SEO 設定</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n            ) : (\n              <div className=\"divide-y\">\n                {PAGE_OPTIONS.map((pageOption) => {\n                  const setting = getPageSetting(pageOption.value);\n                  \n                  return (\n                    <div\n                      key={pageOption.value}\n                      className=\"flex items-start justify-between py-4\"\n                      data-testid={`seo-page-${pageOption.value}`}\n                    >\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium text-lg mb-1\" data-testid={`text-page-name-${pageOption.value}`}>\n                          {pageOption.label}\n                        </div>\n                        {setting ? (\n                          <div className=\"space-y-1\">\n                            <div className=\"text-sm\">\n                              <span className=\"text-muted-foreground\">標題: </span>\n                              <span data-testid={`text-page-title-${pageOption.value}`}>{setting.title}</span>\n                            </div>\n                            <div className=\"text-sm\">\n                              <span className=\"text-muted-foreground\">描述: </span>\n                              <span className=\"line-clamp-2\" data-testid={`text-page-description-${pageOption.value}`}>\n                                {setting.description}\n                              </span>\n                            </div>\n                            {setting.keywords && (\n                              <div className=\"text-sm\">\n                                <span className=\"text-muted-foreground\">關鍵字: </span>\n                                <span data-testid={`text-page-keywords-${pageOption.value}`}>{setting.keywords}</span>\n                              </div>\n                            )}\n                          </div>\n                        ) : (\n                          <div className=\"text-sm text-muted-foreground\">尚未設定</div>\n                        )}\n                      </div>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleEditPage(pageOption.value)}\n                        data-testid={`button-edit-${pageOption.value}`}\n                      >\n                        <Edit className=\"h-4 w-4 mr-1\" />\n                        {setting ? \"編輯\" : \"設定\"}\n                      </Button>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Dialog open={isDialogOpen} onOpenChange={handleCloseDialog}>\n          <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-seo-form\">\n            <DialogHeader>\n              <DialogTitle>\n                編輯 SEO 設定 - {PAGE_OPTIONS.find((p) => p.value === selectedPage)?.label}\n              </DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"title\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>頁面標題 *</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-seo-title\" />\n                      </FormControl>\n                      <FormDescription>\n                        這將顯示在瀏覽器標籤和搜尋結果中 (建議 50-60 字元)\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"description\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>頁面描述 *</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} rows={4} data-testid=\"input-seo-description\" />\n                      </FormControl>\n                      <FormDescription>\n                        這將顯示在搜尋結果的摘要中 (建議 150-160 字元)\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"keywords\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>關鍵字</FormLabel>\n                      <FormControl>\n                        <Input {...field} value={field.value || \"\"} data-testid=\"input-seo-keywords\" />\n                      </FormControl>\n                      <FormDescription>\n                        用逗號分隔多個關鍵字，例如: 美髮, 剪髮, 染髮, 燙髮\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"ogImage\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>社群分享圖片 URL</FormLabel>\n                      <FormControl>\n                        <Input {...field} value={field.value || \"\"} placeholder=\"https://...\" data-testid=\"input-seo-og-image\" />\n                      </FormControl>\n                      <FormDescription>\n                        當頁面在社群媒體分享時顯示的圖片 (建議尺寸 1200x630px)\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <DialogFooter>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={handleCloseDialog}\n                    data-testid=\"button-cancel\"\n                  >\n                    取消\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={saveSeoSettingMutation.isPending}\n                    data-testid=\"button-submit\"\n                  >\n                    {saveSeoSettingMutation.isPending ? \"儲存中...\" : \"儲存設定\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10861},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"design_guidelines.md":{"content":"# Design Guidelines for 雅曼 (Yaman) Hair Salon\n\n## Design Approach\n\n**Primary Reference:** Airbnb's warm hospitality + beauty industry polish (think Glossier, Sephora's approachability)\n\n**Core Principle:** Create a welcoming, family-like atmosphere that makes clients feel at home while maintaining professional credibility. The design should feel like visiting a friend's beautifully curated space.\n\n## Typography\n\n**Font Families:**\n- Headings: Noto Serif TC (elegant, warm serif for Chinese characters)\n- Body: Noto Sans TC (clean, readable sans-serif)\n- Accents: Inter (for modern UI elements, prices, buttons)\n\n**Hierarchy:**\n- Hero Headline: 48px/56px (mobile/desktop), font-weight 600\n- Section Titles: 32px/40px, font-weight 600\n- Service Names: 24px, font-weight 500\n- Body Text: 16px/18px, font-weight 400, line-height 1.6\n- Small Print: 14px (contact info, footer)\n\n## Layout System\n\n**Spacing Scale:** Tailwind units of 2, 4, 6, 8, 12, 16, 20, 24\n- Micro spacing (between related elements): 2-4\n- Component spacing: 6-8\n- Section padding: 12-16 (mobile), 20-24 (desktop)\n- Major section gaps: 16-20\n\n**Grid Strategy:**\n- Single column mobile-first\n- 2-column for services/team on tablet (md:)\n- 3-column max for service cards on desktop (lg:)\n- Asymmetric layouts for visual interest (e.g., 60/40 splits for about sections)\n\n## Page Structure & Components\n\n### Homepage Layout (7 sections)\n\n**1. Hero Section (80vh)**\n- Full-width background image showing warm salon interior or stylist interaction\n- Centered content overlay with blurred-background button\n- Headline: \"雅曼美髮沙龍 - 如家般溫馨的美髮體驗\"\n- Subtext: Contact info + LINE ID prominently displayed\n- Primary CTA: \"立即預約\" (Book Now) with blurred backdrop\n\n**2. Welcome Story Section**\n- 2-column layout (image left, text right on desktop)\n- Warm introduction to Yaman's family philosophy\n- Client testimonial quote integrated\n\n**3. Services Showcase**\n- 3-column grid (stacks to 1 on mobile)\n- Each service card: icon/image, name, description, price range\n- Services: 剪髮 (Haircut), 染髮 (Coloring), 燙髮 (Perming), 護髮 (Treatment), 造型 (Styling), 頭皮護理 (Scalp Care)\n- Soft rounded corners (rounded-2xl), subtle shadows\n\n**4. Team Introduction**\n- 2-3 column grid with stylist photos\n- Circular images, names, specialties\n- Friendly, approachable presentation\n\n**5. Booking Process Preview**\n- 3-step visual guide (Service → Stylist → Time)\n- Simple illustrations/icons\n- CTA: \"開始預約\"\n\n**6. Contact & Location**\n- 2-column: Map/location image left, contact details + LINE integration right\n- Address: 中和區民德路52號1樓\n- Phone: 02-89513058 (clickable)\n- LINE button with @377bechg prominently featured\n- Opening hours display\n\n**7. Footer**\n- Business info, quick links, social proof (\"服務客戶超過XX位\")\n- Newsletter signup (optional engagement tool)\n\n### Booking System Components\n\n**Multi-Step Form:**\n- Progress indicator (dots or steps)\n- Step 1: Service selection (radio cards with images)\n- Step 2: Stylist selection (avatar cards, includes \"無指定\" option)\n- Step 3: Calendar date picker (warm color highlights)\n- Step 4: Time slot selection (button grid)\n- Step 5: Customer details (name, phone, LINE ID)\n- Confirmation summary page\n\n**Admin Dashboard:**\n- Clean table view of appointments\n- Filters: Date range, service type, stylist\n- Action buttons: Confirm, Reschedule, Cancel\n- Calendar view toggle option\n\n## Component Library\n\n**Navigation:**\n- Sticky header with logo left, menu items center/right\n- Mobile: Hamburger menu with slide-in drawer\n- Navigation items: 首頁, 服務項目, 設計師團隊, 預約, 聯絡我們\n\n**Buttons:**\n- Primary: Rounded-lg, px-8 py-3, soft shadows\n- Secondary: Outline style with subtle hover lift\n- All buttons on images: backdrop-blur-md background\n\n**Cards:**\n- Service cards: rounded-2xl, p-6, hover lift (translate-y-1)\n- Stylist cards: rounded-xl, overflow-hidden images\n- Appointment cards: Clean borders, organized info hierarchy\n\n**Forms:**\n- Rounded-lg inputs with focus states (ring-2)\n- Label spacing: mb-2\n- Input padding: px-4 py-3\n- Error states with gentle color indicators\n\n## Images\n\n**Hero Image:** \n- Full-width salon interior shot showing warm lighting, comfortable styling stations, plants, welcoming atmosphere\n- Alternative: Stylist-client interaction showing friendly, family-like service\n\n**Section Images:**\n- Welcome section: Cozy salon corner or team group photo\n- Service cards: Before/after examples or service-specific imagery\n- Stylist photos: Professional headshots with natural, warm lighting\n- Location section: Storefront exterior or map integration\n\n**Image Treatment:**\n- Soft rounded corners throughout (rounded-xl to rounded-2xl)\n- Subtle overlay on hero (20-30% dark overlay for text readability)\n- Natural, warm color grading preferred\n\n## Animations\n\n**Minimal, Purposeful Only:**\n- Subtle fade-in on scroll for section reveals (once per section)\n- Gentle hover lift on cards (translate-y-1)\n- Smooth transitions on form steps\n- No excessive animations - keep it calm and welcoming\n\n## Accessibility\n\n- Minimum touch targets: 44x44px\n- Form labels always visible\n- Sufficient color contrast ratios (WCAG AA minimum)\n- Keyboard navigation for booking flow\n- Screen reader friendly appointment confirmations\n\n---\n\n**Design Philosophy:** Every element should reinforce the feeling of coming home - warm, familiar, comfortable, yet polished and professional. The user should feel welcomed from the first visit, with clear pathways to booking and communication through LINE.","size_bytes":5621},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2210},"client/src/components/ServiceCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\n\ninterface ServiceCardProps {\n  title: string;\n  description: string;\n  price: string;\n  image: string;\n}\n\nexport default function ServiceCard({ title, description, price, image }: ServiceCardProps) {\n  return (\n    <Card className=\"overflow-hidden hover-elevate group\">\n      <div className=\"aspect-[4/3] overflow-hidden\">\n        <img \n          src={image} \n          alt={title}\n          className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105\"\n        />\n      </div>\n      <CardContent className=\"p-6\">\n        <h3 className=\"text-xl font-serif font-semibold mb-2\">{title}</h3>\n        <p className=\"text-muted-foreground text-sm mb-4 leading-relaxed\">{description}</p>\n        <p className=\"text-primary font-semibold\">{price}</p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":875},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/AdminCustomers.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertCustomerSchema, type Customer, type InsertCustomer, type PurchaseRecord } from \"@shared/schema\";\nimport { UserPlus, Eye, Trash2, Search } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { format } from \"date-fns\";\n\nexport default function AdminCustomers() {\n  const { toast } = useToast();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isViewDialogOpen, setIsViewDialogOpen] = useState(false);\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const { data: customers = [], isLoading } = useQuery<Customer[]>({\n    queryKey: [\"/api/customers\"],\n  });\n\n  const { data: purchaseRecords = [] } = useQuery<PurchaseRecord[]>({\n    queryKey: [\"/api/purchase-records/customer\", selectedCustomer?.id],\n    enabled: !!selectedCustomer?.id,\n  });\n\n  const form = useForm<InsertCustomer>({\n    resolver: zodResolver(insertCustomerSchema),\n    defaultValues: {\n      name: \"\",\n      phone: \"\",\n      lineId: null,\n      email: null,\n      notes: null,\n    },\n  });\n\n  const createCustomerMutation = useMutation({\n    mutationFn: async (data: InsertCustomer) => {\n      const response = await fetch(\"/api/customers\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) throw new Error(\"Failed to create customer\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({ title: \"客戶已新增\" });\n      setIsCreateDialogOpen(false);\n      form.reset();\n    },\n  });\n\n  const deleteCustomerMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await fetch(`/api/customers/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete customer\");\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({ title: \"客戶已刪除\" });\n    },\n  });\n\n  const handleViewCustomer = (customer: Customer) => {\n    setSelectedCustomer(customer);\n    setIsViewDialogOpen(true);\n  };\n\n  const handleDeleteCustomer = (id: string) => {\n    if (confirm(\"確定要刪除此客戶嗎？\")) {\n      deleteCustomerMutation.mutate(id);\n    }\n  };\n\n  const filteredCustomers = customers.filter((customer) =>\n    customer.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    customer.phone.includes(searchQuery)\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-serif\">客戶管理</h1>\n          <Button\n            onClick={() => setIsCreateDialogOpen(true)}\n            data-testid=\"button-add-customer\"\n          >\n            <UserPlus className=\"h-4 w-4 mr-2\" />\n            新增客戶\n          </Button>\n        </div>\n\n        <Card className=\"mb-6\">\n          <CardContent className=\"pt-6\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"搜尋客戶姓名或電話...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-customers\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>客戶列表 ({filteredCustomers.length})</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">載入中...</div>\n            ) : filteredCustomers.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                {searchQuery ? \"找不到符合的客戶\" : \"尚無客戶資料\"}\n              </div>\n            ) : (\n              <div className=\"divide-y\">\n                {filteredCustomers.map((customer) => (\n                  <div\n                    key={customer.id}\n                    className=\"flex items-center justify-between py-4\"\n                    data-testid={`customer-${customer.id}`}\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium text-lg\" data-testid={`text-customer-name-${customer.id}`}>\n                        {customer.name}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground space-x-4\">\n                        <span data-testid={`text-customer-phone-${customer.id}`}>\n                          電話: {customer.phone}\n                        </span>\n                        {customer.lineId && (\n                          <span data-testid={`text-customer-line-${customer.id}`}>\n                            LINE: {customer.lineId}\n                          </span>\n                        )}\n                      </div>\n                      {customer.email && (\n                        <div className=\"text-sm text-muted-foreground\" data-testid={`text-customer-email-${customer.id}`}>\n                          Email: {customer.email}\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleViewCustomer(customer)}\n                        data-testid={`button-view-${customer.id}`}\n                      >\n                        <Eye className=\"h-4 w-4 mr-1\" />\n                        查看\n                      </Button>\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        onClick={() => handleDeleteCustomer(customer.id)}\n                        data-testid={`button-delete-${customer.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n          <DialogContent data-testid=\"dialog-create-customer\">\n            <DialogHeader>\n              <DialogTitle>新增客戶</DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit((data) => createCustomerMutation.mutate(data))} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>客戶姓名 *</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-customer-name\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"phone\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>聯絡電話 *</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-customer-phone\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"lineId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>LINE ID</FormLabel>\n                      <FormControl>\n                        <Input {...field} value={field.value || \"\"} data-testid=\"input-customer-line\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>電子郵件</FormLabel>\n                      <FormControl>\n                        <Input {...field} value={field.value || \"\"} type=\"email\" data-testid=\"input-customer-email\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"notes\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>備註</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} value={field.value || \"\"} data-testid=\"input-customer-notes\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <DialogFooter>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setIsCreateDialogOpen(false)}\n                    data-testid=\"button-cancel\"\n                  >\n                    取消\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createCustomerMutation.isPending}\n                    data-testid=\"button-submit\"\n                  >\n                    {createCustomerMutation.isPending ? \"新增中...\" : \"新增客戶\"}\n                  </Button>\n                </DialogFooter>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={isViewDialogOpen} onOpenChange={setIsViewDialogOpen}>\n          <DialogContent data-testid=\"dialog-view-customer\">\n            <DialogHeader>\n              <DialogTitle>客戶詳情</DialogTitle>\n            </DialogHeader>\n            {selectedCustomer && (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">客戶姓名</div>\n                    <div className=\"font-medium\" data-testid=\"text-detail-name\">\n                      {selectedCustomer.name}\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">聯絡電話</div>\n                    <div className=\"font-medium\" data-testid=\"text-detail-phone\">\n                      {selectedCustomer.phone}\n                    </div>\n                  </div>\n                  {selectedCustomer.lineId && (\n                    <div>\n                      <div className=\"text-sm text-muted-foreground\">LINE ID</div>\n                      <div className=\"font-medium\" data-testid=\"text-detail-line\">\n                        {selectedCustomer.lineId}\n                      </div>\n                    </div>\n                  )}\n                  {selectedCustomer.email && (\n                    <div>\n                      <div className=\"text-sm text-muted-foreground\">電子郵件</div>\n                      <div className=\"font-medium\" data-testid=\"text-detail-email\">\n                        {selectedCustomer.email}\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {selectedCustomer.notes && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">備註</div>\n                    <div className=\"font-medium\" data-testid=\"text-detail-notes\">\n                      {selectedCustomer.notes}\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <div className=\"text-sm text-muted-foreground mb-2\">消費紀錄</div>\n                  {purchaseRecords.length === 0 ? (\n                    <div className=\"text-sm text-muted-foreground\">尚無消費紀錄</div>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {purchaseRecords.map((record) => (\n                        <div\n                          key={record.id}\n                          className=\"p-3 border rounded-md\"\n                          data-testid={`purchase-record-${record.id}`}\n                        >\n                          <div className=\"flex justify-between items-start mb-1\">\n                            <div className=\"font-medium\">{record.serviceName}</div>\n                            <Badge variant=\"secondary\">NT$ {record.amount}</Badge>\n                          </div>\n                          <div className=\"text-sm text-muted-foreground\">\n                            {format(new Date(record.purchaseDate), \"yyyy-MM-dd HH:mm\")}\n                          </div>\n                          {record.stylistName && (\n                            <div className=\"text-sm text-muted-foreground\">\n                              設計師: {record.stylistName}\n                            </div>\n                          )}\n                          {record.notes && (\n                            <div className=\"text-sm text-muted-foreground mt-1\">\n                              {record.notes}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","size_bytes":14830},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/Navbar.tsx":{"content":"import { useState } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Menu, X, Phone, Settings } from \"lucide-react\";\nimport { SiLine } from \"react-icons/si\";\n\nexport default function Navbar() {\n  const [location] = useLocation();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const navItems = [\n    { path: \"/\", label: \"首頁\" },\n    { path: \"/services\", label: \"服務項目\" },\n    { path: \"/team\", label: \"設計師團隊\" },\n    { path: \"/booking\", label: \"線上預約\" },\n    { path: \"/contact\", label: \"聯絡我們\" },\n    { path: \"/admin\", label: \"後台管理\", icon: Settings },\n  ];\n\n  return (\n    <nav className=\"sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16 gap-4\">\n          <Link href=\"/\" className=\"flex items-center gap-2\">\n            <h1 className=\"text-2xl font-serif font-bold text-primary\">雅曼</h1>\n          </Link>\n\n          <div className=\"hidden md:flex items-center gap-6\">\n            {navItems.map((item) => (\n              <Link key={item.path} href={item.path}>\n                <Button\n                  variant=\"ghost\"\n                  className={location === item.path ? \"bg-accent\" : \"\"}\n                  data-testid={`link-${item.label}`}\n                >\n                  {item.icon && <item.icon className=\"w-4 h-4 mr-2\" />}\n                  {item.label}\n                </Button>\n              </Link>\n            ))}\n          </div>\n\n          <div className=\"hidden md:flex items-center gap-2\">\n            <a href=\"tel:02-89513058\">\n              <Button variant=\"outline\" size=\"sm\" data-testid=\"button-phone\">\n                <Phone className=\"w-4 h-4 mr-2\" />\n                02-89513058\n              </Button>\n            </a>\n            <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <Button variant=\"default\" size=\"sm\" data-testid=\"button-line\">\n                <SiLine className=\"w-4 h-4 mr-2\" />\n                LINE預約\n              </Button>\n            </a>\n          </div>\n\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden\"\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            data-testid=\"button-mobile-menu\"\n          >\n            {mobileMenuOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n          </Button>\n        </div>\n\n        {mobileMenuOpen && (\n          <div className=\"md:hidden py-4 border-t\">\n            <div className=\"flex flex-col gap-2\">\n              {navItems.map((item) => (\n                <Link key={item.path} href={item.path}>\n                  <Button\n                    variant=\"ghost\"\n                    className={`w-full justify-start ${location === item.path ? \"bg-accent\" : \"\"}`}\n                    onClick={() => setMobileMenuOpen(false)}\n                    data-testid={`link-mobile-${item.label}`}\n                  >\n                    {item.icon && <item.icon className=\"w-4 h-4 mr-2\" />}\n                    {item.label}\n                  </Button>\n                </Link>\n              ))}\n              <div className=\"flex flex-col gap-2 mt-4\">\n                <a href=\"tel:02-89513058\">\n                  <Button variant=\"outline\" className=\"w-full\" data-testid=\"button-mobile-phone\">\n                    <Phone className=\"w-4 h-4 mr-2\" />\n                    02-89513058\n                  </Button>\n                </a>\n                <a href=\"https://line.me/R/ti/p/@377bechg\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Button variant=\"default\" className=\"w-full\" data-testid=\"button-mobile-line\">\n                    <SiLine className=\"w-4 h-4 mr-2\" />\n                    LINE預約\n                  </Button>\n                </a>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </nav>\n  );\n}\n","size_bytes":4037},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/examples/Booking.tsx":{"content":"import { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport Booking from '../../pages/Booking';\n\nexport default function BookingExample() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Booking />\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n","size_bytes":488},"client/src/pages/AdminChangePassword.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Lock } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function AdminChangePassword() {\n  const [oldPassword, setOldPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const { toast } = useToast();\n\n  const changePasswordMutation = useMutation({\n    mutationFn: async () => {\n      const adminUser = localStorage.getItem(\"adminUser\");\n      if (!adminUser) throw new Error(\"未登入\");\n      \n      const user = JSON.parse(adminUser);\n      \n      const response = await fetch(\"/api/auth/change-password\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n          username: user.username, \n          oldPassword, \n          newPassword \n        }),\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"修改密碼失敗\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"密碼已更新\", description: \"請使用新密碼登入\" });\n      setOldPassword(\"\");\n      setNewPassword(\"\");\n      setConfirmPassword(\"\");\n    },\n    onError: (error: Error) => {\n      toast({ \n        title: \"修改密碼失敗\", \n        description: error.message,\n        variant: \"destructive\" \n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (newPassword !== confirmPassword) {\n      toast({ \n        title: \"密碼不符\", \n        description: \"新密碼與確認密碼不一致\",\n        variant: \"destructive\" \n      });\n      return;\n    }\n    \n    if (newPassword.length < 6) {\n      toast({ \n        title: \"密碼太短\", \n        description: \"新密碼至少需要6個字元\",\n        variant: \"destructive\" \n      });\n      return;\n    }\n    \n    changePasswordMutation.mutate();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-4 sm:p-6\">\n      <div className=\"max-w-2xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-serif\">修改密碼</h1>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Lock className=\"h-5 w-5\" />\n              更改管理員密碼\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"oldPassword\">目前密碼</Label>\n                <Input\n                  id=\"oldPassword\"\n                  type=\"password\"\n                  value={oldPassword}\n                  onChange={(e) => setOldPassword(e.target.value)}\n                  placeholder=\"請輸入目前密碼\"\n                  required\n                  data-testid=\"input-old-password\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"newPassword\">新密碼</Label>\n                <Input\n                  id=\"newPassword\"\n                  type=\"password\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  placeholder=\"請輸入新密碼（至少6個字元）\"\n                  required\n                  data-testid=\"input-new-password\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"confirmPassword\">確認新密碼</Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  placeholder=\"再次輸入新密碼\"\n                  required\n                  data-testid=\"input-confirm-password\"\n                />\n              </div>\n              <div className=\"flex gap-2\">\n                <Button \n                  type=\"submit\"\n                  disabled={changePasswordMutation.isPending}\n                  data-testid=\"button-change-password\"\n                >\n                  {changePasswordMutation.isPending ? \"更新中...\" : \"更新密碼\"}\n                </Button>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4711}},"version":2}